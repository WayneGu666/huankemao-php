(function(t){function e(e){for(var a,r,s=e[0],c=e[1],d=e[2],l=0,u=[];l<s.length;l++)r=s[l],Object.prototype.hasOwnProperty.call(o,r)&&o[r]&&u.push(o[r][0]),o[r]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);p&&p(e);while(u.length)u.shift()();return i.push.apply(i,d||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],a=!0,s=1;s<n.length;s++){var c=n[s];0!==o[c]&&(a=!1)}a&&(i.splice(e--,1),t=r(r.s=n[0]))}return t}var a={},o={app:0},i=[];function r(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=t,r.c=a,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)r.d(n,a,function(e){return t[e]}.bind(null,a));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/chat-tool/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var d=0;d<s.length;d++)e(s[d]);var p=c;i.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"0df0":function(t,e,n){"use strict";var a=n("288f"),o=n.n(a);o.a},"288f":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("f751"),n("097d");var a,o=n("2b0e"),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("HelloWorld")],1)},r=[],s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"hello"},[n("div",{staticClass:"content_box"},[n("van-field",{attrs:{center:"",placeholder:"请输入搜索内容"},scopedSlots:t._u([{key:"button",fn:function(){return[n("van-button",{attrs:{size:"small",type:"primary"},on:{click:t.search}},[t._v("搜索")])]},proxy:!0}]),model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),n("div",{staticClass:"group",on:{click:t.groupShoe}},[t._v("选择分组："+t._s(t.groupname))]),n("van-tabs",{staticClass:"content",attrs:{swipeable:""},on:{click:t.tabClick}},t._l(t.classList,(function(e){return n("van-tab",{key:e.id,attrs:{title:e.name,name:e.id}},[n("van-radio-group",{model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[n("van-cell-group",t._l(t.list,(function(e,a){return n("van-cell",{key:a,attrs:{center:"",clickable:""},on:{click:function(n){return t.CellClick(e)}},scopedSlots:t._u([{key:"right-icon",fn:function(){return[n("van-radio",{attrs:{name:e}})]},proxy:!0}],null,!0)},[1==e.type?[n("span",{staticClass:"custom-title"},[t._v(t._s(e.content))])]:2==e.type?[n("img",{staticStyle:{width:"50px",height:"50px"},attrs:{src:e.content}}),n("p",{staticClass:"custom-title"},[t._v(t._s(e.file_name))])]:3==e.type?[n("p",{staticClass:"custom-title"},[t._v(t._s(e.title))]),n("img",{staticStyle:{width:"50px",height:"50px"},attrs:{src:e.cover}})]:5==e.type?[n("p",{staticClass:"custom-title"},[t._v(t._s(e.file_name))])]:6==e.type?[n("p",{staticClass:"custom-title"},[t._v(t._s(e.title))]),n("img",{staticStyle:{width:"50px",height:"50px"},attrs:{src:e.cover}})]:7==e.type?[n("p",{staticClass:"custom-title"},[t._v(t._s(e.file_name))])]:8==e.type?[n("p",{staticClass:"custom-title"},[t._v(t._s(e.title))]),n("img",{staticStyle:{width:"50px",height:"50px"},attrs:{src:e.cover}})]:t._e()],2)})),1)],1)],1)})),1)],1),n("div",{staticClass:"button",on:{click:function(e){return t.send()}}},[t._v("发送")]),n("van-popup",{attrs:{round:"",position:"bottom"},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[n("van-picker",{attrs:{"show-toolbar":"",columns:t.columns},on:{cancel:function(e){t.show=!1},confirm:t.onConfirm}})],1)],1)},c=[],d=(n("d25f"),n("b54a"),n("28a5"),n("57e7"),n("386d"),n("6d67"),n("bd86")),p=(n("e7e5"),n("d399")),l=(n("4ddd"),n("9f14")),u=(n("a44c"),n("e27c")),g=(n("a909"),n("3acc")),_=(n("3c32"),n("417e")),m=(n("0653"),n("34e9")),f=(n("c194"),n("7744")),h=(n("bda7"),n("5e46")),y=(n("da3c"),n("0b33")),v=(n("5f5f"),n("f253")),w=(n("8a58"),n("e41f")),b=(n("be7f"),n("565f")),C=(n("7f7f"),n("66b9"),n("b650")),x=n("bc3a"),k=n.n(x),j={components:(a={},Object(d["a"])(a,C["a"].name,C["a"]),Object(d["a"])(a,b["a"].name,b["a"]),Object(d["a"])(a,w["a"].name,w["a"]),Object(d["a"])(a,v["a"].name,v["a"]),Object(d["a"])(a,y["a"].name,y["a"]),Object(d["a"])(a,h["a"].name,h["a"]),Object(d["a"])(a,f["a"].name,f["a"]),Object(d["a"])(a,m["a"].name,m["a"]),Object(d["a"])(a,_["a"].name,_["a"]),Object(d["a"])(a,g["a"].name,g["a"]),Object(d["a"])(a,u["a"].name,u["a"]),Object(d["a"])(a,l["a"].name,l["a"]),Object(d["a"])(a,p["a"].name,p["a"]),a),data:function(){return{name:"",classList:[],show:!1,result:[],checked:"",columns:[],groupname:"所有",group_id:"",list:[],radio:"",couId:"",tabindex:"1",groupList:[],url:"",http:"../"}},watch:{$route:function(t,e){console.log(t.path)}},created:function(){var t=this.getUrlCode().code;localStorage.getItem("user_id")?this.getClass():t?this.getmyId():this.getAppid()},methods:{CellClick:function(t){this.radio=t},search:function(){var t=this;k.a.post("../admin.php/app_get_content_engine",{type:3,content_type:this.tabindex,group_id:this.group_id,keyword:this.name,page:1,limit:1e3}).then((function(e){200==e.data.code&&(t.list=e.data.data,t.list&&t.list.map((function(e,n){var a=new FormData;1==e.type?a.append("arr[".concat(n,"][content_engine_title]"),e.content):3==e.type||6==e.type?a.append("arr[".concat(n,"][content_engine_title]"),e.title):a.append("arr[".concat(n,"][content_engine_title]"),e.file_name),a.append("arr[".concat(n,"][wx_user_id]"),localStorage.getItem("user_id")),a.append("arr[".concat(n,"][wx_customer_id]"),t.couId),a.append("arr[".concat(n,"][search_name]"),t.name),a.append("arr[".concat(n,"][content_engine_group_id]"),e.content_group_id),a.append("arr[".concat(n,"][content_engine_type]"),e.type),a.append("arr[".concat(n,"][content_engine_id]"),e.id),a.append("type",1),k.a.post("../admin.php/content_operating",a,{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((function(t){t.data.code}))})))}))},getUrlCode:function(){var t=location.search,e=new Object;if(-1!=t.indexOf("?"))for(var n=t.substr(1),a=n.split("&"),o=0;o<a.length;o++)e[a[o].split("=")[0]]=a[o].split("=")[1];return e},getAppid:function(){var t=this;k.a.post("../admin.php/get_code_staff_user",{code:""}).then((function(e){t.getCode(e.data.data)}))},getCode:function(t){var e=window.location.protocol+"//"+window.location.host,n=encodeURI(e+"/chat-tool/index.html"),a="https://open.weixin.qq.com/connect/oauth2/authorize?appid=".concat(t,"&redirect_uri=").concat(n,"&response_type=code&scope=snsapi_base&state=#wechat_redirect");window.location.href=a},getmyId:function(){var t=this;k.a.post("../admin.php/get_code_staff_user",{code:this.getUrlCode().code}).then((function(e){200==e.data.code&&(localStorage.setItem("user_id",e.data.data.user_id),t.getClass())}))},getClass:function(){var t=this;k.a.post(this.http+"admin.php/app_get_content_engine",{type:1}).then((function(e){200==e.data.code&&(t.classList=e.data.data,t.getGroup())}))},getGroup:function(){var t=this;k.a.post(this.http+"admin.php/app_get_content_engine",{type:2}).then((function(e){200==e.data.code&&(t.columns=[],t.groupList=e.data.data,t.groupList.unshift({name:"全部",id:""}),t.groupList.map((function(e){t.columns.push(e.name),t.getContent()})))}))},getContent:function(){var t=this;k.a.post(this.http+"admin.php/app_get_content_engine",{type:3,content_type:this.tabindex,group_id:this.group_id,keyword:this.name,page:1,limit:1e3}).then((function(e){200==e.data.code&&(t.list=e.data.data)}))},Set:function(t){},send:function(){var t=this;this.radio?k.a.post("../admin.php/get_js_sdk",{url:window.location.href.split("#")[0]}).then((function(e){200==e.data.code&&(wx.config({beta:!0,debug:!1,appId:e.data.data.config.appId,timestamp:e.data.data.config.timestamp,nonceStr:e.data.data.config.nonceStr,signature:e.data.data.config.signature,jsApiList:["sendChatMessage","getContext","getCurExternalContact"]}),wx.ready((function(){t.getCon(e.data.data.agent)})))})):p["a"].fail("请先选择数据")},getCon:function(t){var e=this,n=window.location.protocol+"//"+window.location.host;e.url=encodeURI(n),wx.agentConfig({corpid:t.corpid,agentid:t.agentid,timestamp:t.timestamp,nonceStr:t.nonceStr,signature:t.signature,jsApiList:["sendChatMessage","getContext","getCurExternalContact"],success:function(t){wx.invoke("getCurExternalContact",{},(function(t){console.log(t),"getCurExternalContact:ok"==t.err_msg&&(e.couId=t.userId,wx.invoke("getContext",{},(function(t){if("getContext:ok"==t.err_msg){t.entry;"1"==e.radio.type?wx.invoke("sendChatMessage",{msgtype:"text",text:{content:e.radio.content}},(function(t){"sendChatMessage:ok"==t.err_msg&&e.sendTime(e.radio)})):"2"==e.radio.type?wx.invoke("sendChatMessage",{msgtype:"image",image:{mediaid:e.radio.media_id}},(function(t){"sendChatMessage:ok"==t.err_msg&&e.sendTime(e.radio)})):"3"==e.radio.type?wx.invoke("sendChatMessage",{msgtype:"news",news:{link:e.url+"/article-preview/huankemao_h5.html?id="+e.radio.id+"&type=1&userid="+localStorage.getItem("user_id"),title:e.radio.title,desc:e.radio.summary,imgUrl:e.radio.cover}},(function(t){"sendChatMessage:ok"==t.err_msg&&e.sendTime(e.radio)})):"5"==e.radio.type?wx.invoke("sendChatMessage",{msgtype:"video",video:{mediaid:e.radio.media_id}},(function(t){"sendChatMessage:ok"==t.err_msg&&e.sendTime(e.radio)})):"6"==e.radio.type?wx.invoke("sendChatMessage",{msgtype:"miniprogram",miniprogram:{appid:e.radio.applets_id,title:e.radio.title,imgUrl:e.radio.cover,page:e.radio.applets_path}},(function(t){"sendChatMessage:ok"==t.err_msg&&e.sendTime(e.radio)})):"7"==e.radio.type?wx.invoke("sendChatMessage",{msgtype:"file",file:{mediaid:e.radio.media_id}},(function(t){"sendChatMessage:ok"==t.err_msg&&e.sendTime(e.radio)})):"8"==e.radio.type&&(console.log(e.radio),wx.invoke("sendChatMessage",{msgtype:"news",news:{link:e.radio.link,title:e.radio.title,desc:e.radio.summary,imgUrl:e.radio.cover}},(function(t){console.log(t),"sendChatMessage:ok"==t.err_msg&&e.sendTime(e.radio)})))}})))}))},fail:function(t){console.log(t)}})},sendTime:function(t){var e=new FormData;"1"==t.type?(e.append("arr[0][wx_user_id]",localStorage.getItem("user_id")),e.append("arr[0][wx_customer_id]",this.couId),e.append("arr[0][search_name]",""),e.append("arr[0][content_engine_group_id]",t.content_group_id),e.append("arr[0][content_engine_title]",t.content),e.append("arr[0][content_engine_type]",t.type),e.append("arr[0][content_engine_id]",t.id),e.append("type",2)):3==t.type||6==t.type?(e.append("arr[0][wx_user_id]",localStorage.getItem("user_id")),e.append("arr[0][wx_customer_id]",this.couId),e.append("arr[0][search_name]",""),e.append("arr[0][content_engine_group_id]",t.content_group_id),e.append("arr[0][content_engine_title]",t.title),e.append("arr[0][content_engine_type]",t.type),e.append("arr[0][content_engine_id]",t.id),e.append("type",2)):(e.append("arr[0][wx_user_id]",localStorage.getItem("user_id")),e.append("arr[0][wx_customer_id]",this.couId),e.append("arr[0][search_name]",""),e.append("arr[0][content_engine_group_id]",t.content_group_id),e.append("arr[0][content_engine_title]",t.file_name),e.append("arr[0][content_engine_type]",t.type),e.append("arr[0][content_engine_id]",t.id),e.append("type",2)),k.a.post("../admin.php/content_operating",e,{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((function(t){200==t.data.code&&(window.location.href="about:blank",window.close())}))},groupShoe:function(){this.show=!0},tabClick:function(t,e){this.tabindex=t,this.getContent()},onConfirm:function(t){var e=this;this.show=!1,this.groupname=t,this.group_id=this.groupList.filter((function(t){return t.name==e.groupname}))[0].id,this.getContent()}}},O=j,S=(n("0df0"),n("2877")),I=Object(S["a"])(O,s,c,!1,null,null,null),M=I.exports,T={name:"app",components:{HelloWorld:M}},L=T,U=(n("7c55"),Object(S["a"])(L,i,r,!1,null,null,null)),P=U.exports,E=n("5c96"),A=n.n(E);n("0fae"),n("ed2c");o["default"].use(A.a),o["default"].config.productionTip=!1,new o["default"]({render:function(t){return t(P)}}).$mount("#app")},"5c48":function(t,e,n){},"7c55":function(t,e,n){"use strict";var a=n("5c48"),o=n.n(a);o.a},ed2c:function(t,e,n){}});
//# sourceMappingURL=app.8629dcca.js.map