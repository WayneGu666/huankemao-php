(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6ff5215d"],{"05e6":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"add-code",attrs:{"element-loading-text":"拼命加载中...","element-loading-spinner":"el-icon-loading"}},[a("div",{staticClass:"head"},[a("div",{staticClass:"title"},[t._v(" "+t._s(t.$route.query.id?"编辑渠道活码":t.$route.meta.title)+" ")]),a("el-button",{staticClass:"btn-blue",attrs:{size:"small"},on:{click:t.handleBack}},[t._v(" 返回 ")])],1),a("div",{staticClass:"steps"},[a("span",{class:1===t.active?"circle active":"circle active el-icon-check"},[t._v(t._s(1===t.active?"1":""))]),a("span",{staticClass:"text"},[t._v("基础设置")]),a("span",{class:1===t.active?"line":"line active"}),a("span",{class:1===t.active?"circle":2===t.active?"circle active":"circle active el-icon-check"},[t._v(t._s(t.active>2?"":2))]),a("span",{staticClass:"text"},[t._v("引流成员设置")]),a("span",{class:t.active<3?"line":"line active"}),a("span",{class:t.active<3?"circle":"circle active"},[t._v("3")]),a("span",{staticClass:"text"},[t._v("欢迎语设置")])]),a("div",{staticClass:"main"},[a("div",{directives:[{name:"show",rawName:"v-show",value:1===t.active,expression:"active === 1"}],staticClass:"form"},[a("el-form",{attrs:{"label-position":"left","label-width":"180px",model:t.form}},[a("el-form-item",{attrs:{label:"选择分组",required:""}},[t.loading?t._e():a("SelectTree",{attrs:{options:t.groupOptions,accordion:!1,value:t.form.groupId},on:{getValue:t.getSelectTreeValue}})],1),a("el-form-item",{attrs:{label:"活码名称",required:""}},[a("el-input",{staticStyle:{width:"600px"},attrs:{type:"textarea",placeholder:"限30字符",maxlength:"30",size:"small",disabled:Boolean(t.$route.query.id),resize:"none",autosize:{minRows:1,maxRows:1},"show-word-limit":""},model:{value:t.form.liveCodeName,callback:function(e){t.$set(t.form,"liveCodeName",e)},expression:"form.liveCodeName"}}),Boolean(t.$route.query.id)?t._e():a("span",{staticClass:"last-text"},[t._v("（创建成功后不可修改）")])],1),a("el-form-item",{attrs:{label:"自动添加好友"}},[a("el-switch",{attrs:{"active-color":"#6881EC"},model:{value:t.form.switchValue,callback:function(e){t.$set(t.form,"switchValue",e)},expression:"form.switchValue"}}),a("span",{staticClass:"last-text"},[t._v(t._s(t.form.switchValue?"（开启时，客户扫码添加成员自动成员好友，无需确认）":"（关闭时，客户扫码添加成员需成员确认）"))])],1),a("el-form-item",[a("template",{slot:"label"},[t._v(" 客户标签 "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"客户通过扫码添加企业成员后，将被自动打上选中的标签",placement:"top-start"}},[a("i",{staticClass:"iconfont icon-question-circle"})])],1),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.label.loading,expression:"label.loading"}],staticClass:"tabs-wrap"},[a("el-form",{directives:[{name:"show",rawName:"v-show",value:!t.label.loading,expression:"!label.loading"}],attrs:{"label-width":"270px"}},[t._l(t.customLabelList,(function(e,i){return[a("el-form-item",{key:i,staticStyle:{"margin-bottom":"15px"},attrs:{label:e.name}},[t._l(e.group,(function(e,i){return a("el-button",{key:i,ref:e.id,refInFor:!0,staticClass:"btn-gray",staticStyle:{margin:"0 5px"},attrs:{size:"small"},on:{click:function(i){return t.handlePickLabel(e.id)}}},[t._v(" "+t._s(e.name)+" ")])})),a("el-button",{staticClass:"btn-white",staticStyle:{margin:"0 5px"},attrs:{size:"small",icon:"el-icon-plus"},on:{click:function(i){return t.handleAddLabel(e)}}},[t._v("新建标签")])],2)]})),a("el-form-item",[a("el-button",{staticClass:"btn-white",staticStyle:{margin:"20px 0 0 5px"},attrs:{size:"small",icon:"el-icon-plus"},on:{click:t.handleAddLabelGroup}},[t._v("新建标签组")])],1)],2)],1)],2),a("el-form-item",[a("el-button",{staticClass:"btn-blue",attrs:{size:"small"},on:{click:t.handleNext}},[t._v("下一步")])],1)],1),a("el-dialog",{attrs:{width:"600px",title:t.label.title,visible:t.label.visible,"before-close":t.dialogBeforeClose,"close-on-click-modal":!1},on:{"update:visible":function(e){return t.$set(t.label,"visible",e)}}},[a("el-form",{directives:[{name:"show",rawName:"v-show",value:"新增标签"===t.label.title,expression:"label.title === '新增标签'"}],ref:"labelForm1",staticClass:"forms",staticStyle:{"margin-top":"20px"},attrs:{model:t.label,rules:t.labelRules}},[a("el-form-item",{attrs:{label:"选择分组","label-width":"100px"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{disabled:"",placeholder:"请选择",size:"small"},model:{value:t.label.labelGroupName,callback:function(e){t.$set(t.label,"labelGroupName",e)},expression:"label.labelGroupName"}})],1),a("el-form-item",{staticStyle:{"margin-bottom":"10px"},attrs:{label:"标签名称","label-width":"100px",prop:"labelValue"}},[a("el-input",{attrs:{placeholder:"请输入标签（不得超过15个字符）",size:"small"},model:{value:t.label.labelValue,callback:function(e){t.$set(t.label,"labelValue",e)},expression:"label.labelValue"}})],1),a("el-form-item",{attrs:{label:"","label-width":"100px"}},[a("span",{staticStyle:{"font-size":"12px",color:"#999"}},[t._v("每个标签名称最多15个字，同时新建多个标签时，请用“空格” 隔开。")])])],1),a("el-form",{directives:[{name:"show",rawName:"v-show",value:"新增标签组"===t.label.title,expression:"label.title === '新增标签组'"}],ref:"labelForm2",staticStyle:{"margin-top":"20px"},attrs:{model:t.label,rules:t.labelRules}},[a("el-form-item",{attrs:{label:"分组名称","label-width":"100px",prop:"labelGroupName"}},[a("el-input",{attrs:{placeholder:"请输入分组名（不得超过15个字符）",maxlength:"15",size:"small"},model:{value:t.label.labelGroupName,callback:function(e){t.$set(t.label,"labelGroupName",e)},expression:"label.labelGroupName"}})],1),a("el-form-item",{staticStyle:{"margin-bottom":"10px"},attrs:{label:"标签名称","label-width":"100px",prop:"labelValue"}},[a("el-input",{attrs:{placeholder:"请输入标签（不得超过15个字符）",size:"small"},model:{value:t.label.labelValue,callback:function(e){t.$set(t.label,"labelValue",e)},expression:"label.labelValue"}})],1),a("el-form-item",{attrs:{label:"","label-width":"100px"}},[a("span",{staticStyle:{"font-size":"12px",color:"#999"}},[t._v("标签名称最多15个字符，同时新建多个标签时，请用“空格”隔开。")])])],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"btn-white",attrs:{size:"small"},on:{click:function(){t.label.visible=!1,t.label.labelGroupName="",t.$refs.labelForm1.resetFields(),t.$refs.labelForm2.resetFields()}}},[t._v("取 消")]),a("el-button",{staticClass:"btn-blue",attrs:{size:"small"},on:{click:t.handleSubmitLabel}},[t._v("确 定")])],1)],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:2===t.active,expression:"active === 2"}],staticClass:"form"},[a("el-form",{attrs:{"label-position":"left","label-width":"180px",model:t.form}},[a("el-form-item",{attrs:{label:"类型"}},[a("el-radio",{attrs:{disabled:Boolean(t.$route.query.id),label:1},model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[t._v("单人")]),a("el-radio",{attrs:{disabled:Boolean(t.$route.query.id),label:2},model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[t._v("多人")]),Boolean(t.$route.query.id)||1!=t.radio?t._e():a("span",{staticClass:"last-text"},[t._v("（当客户通过活码扫码添加好友时，所加为好友的成员为设置的成员,创建成功后不可修改）")]),Boolean(t.$route.query.id)||2!=t.radio?t._e():a("span",{staticClass:"last-text"},[t._v("（当客户通过活码扫码添加好友时，所加为好友的成员为将从设置的成员中随机分配,创建成功后不可修改）")])],1),a("el-form-item",{staticStyle:{"margin-bottom":"10px"},attrs:{label:"企业成员",required:""}},[a("el-button",{staticClass:"btn-blue",attrs:{size:"small"},on:{click:t.handleEditPick}},[t._v(" "+t._s(0!==t.pickStaffList.length?"编辑":"添加")+" ")]),Boolean(t.$route.query.id)&&1===t.radio?a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"成员更改后，原活码图片上成员头像不会随之更改，无功能影响。",placement:"top-start"}},[a("i",{staticClass:"iconfont icon-question-circle",staticStyle:{"margin-left":"10px"}})]):t._e()],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:0!==t.pickStaffList.length,expression:"pickStaffList.length !== 0"}],staticStyle:{"margin-bottom":"10px"},attrs:{label:"已选成员列表"}},[a("div",{staticClass:"overhidden"},t._l(t.pickStaffList,(function(e,i){return a("span",{key:i},[t._v(t._s(e.name)+" ")])})),0)]),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:2===t.radio&&0!==t.pickDepartment.length,expression:"radio === 2 && pickDepartment.length !== 0"}],staticStyle:{"margin-bottom":"10px"},attrs:{label:"已选部门列表"}},[a("div",{staticClass:"overhidden"},t._l(t.pickDepartment,(function(e,i){return a("span",{key:i},[t._v(t._s(e.name)+" ")])})),0)]),a("el-form-item",{staticStyle:{"margin-bottom":"10px"},attrs:{label:"员工添加上限"}},[a("el-switch",{attrs:{"active-color":"#6881EC"},on:{change:t.changeAddswitch},model:{value:t.AddSwitch,callback:function(e){t.AddSwitch=e},expression:"AddSwitch"}}),a("span",{staticClass:"last-text"},[t._v("（因受官方限制，无法对动态部门的员工设置添加好友上限，只可针对指定活码成员进行设置）")])],1),t.AddSwitch?a("el-form-item",[a("el-table",{staticClass:"table",staticStyle:{width:"500px"},attrs:{data:t.pickStaffList,"header-row-style":{height:"35px"},"row-style":{height:"35px"},"cell-style":{height:"35px"},"header-cell-style":{color:"#333",fontSize:"14px",backgroundColor:"#F6F7FB",fontWeight:"normal",height:"35px"}}},[a("el-table-column",{attrs:{prop:"name",label:"名称"}}),a("el-table-column",{attrs:{label:"上限"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{type:"number",min:"1",max:"500",size:"small"},model:{value:t.numList[e.$index].num,callback:function(i){t.$set(t.numList[e.$index],"num",i)},expression:"numList[scope.$index].num"}})]}}],null,!1,2644079162)})],1)],1):t._e(),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.AddSwitch,expression:"AddSwitch"}],attrs:{label:"备用员工",required:""}},[a("el-select",{staticStyle:{width:"300px"},attrs:{size:"small",placeholder:"请选择"},model:{value:t.spare_staff_id,callback:function(e){t.spare_staff_id=e},expression:"spare_staff_id"}},t._l(t.staff.soloData,(function(t){return a("el-option",{key:t.user_id,attrs:{label:t.name,value:t.user_id}})})),1)],1),a("el-form-item",[a("el-button",{staticClass:"btn-white",attrs:{size:"small"},on:{click:t.handlePrev}},[t._v("上一步")]),a("el-button",{staticClass:"btn-blue",attrs:{size:"small"},on:{click:t.handleNext}},[t._v("下一步")])],1)],1),a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:t.staff.loading,expression:"staff.loading"}],attrs:{title:"添加企业成员",visible:t.staff.visibleMany,"close-on-click-modal":!1,width:"500px"},on:{"update:visible":function(e){return t.$set(t.staff,"visibleMany",e)}}},[a("el-form",{staticStyle:{"margin-top":"20px"},attrs:{"label-position":"left","label-width":"120px"}},[a("el-form-item",{attrs:{label:"选择企业成员"}},[a("div",{staticStyle:{display:"flex",height:"32px","align-item":"center"}},[a("el-button",{staticClass:"btn-white",attrs:{size:"small"},on:{click:t.pickManyStaff}},[t._v("选择企业成员")]),a("el-tooltip",{directives:[{name:"show",rawName:"v-show",value:0!==t.staffCheckList.length,expression:"staffCheckList.length !== 0"}],staticClass:"item",attrs:{effect:"dark",content:t.contentName,placement:"top-start"}},[a("span",{staticStyle:{display:"inline-block","white-space":"nowrap",overflow:"hidden",width:"200px","line-height":"32px","text-overflow":"ellipsis","margin-left":"20px"}},t._l(t.staffCheckList,(function(e,i){return a("span",{key:i},[t._v(t._s(e.name)+" ")])})),0)])],1)]),a("el-form-item",{attrs:{label:"选择部门"}},[a("el-select",{attrs:{size:"small",multiple:"",placeholder:"请选择部门"},model:{value:t.departmentValue,callback:function(e){t.departmentValue=e},expression:"departmentValue"}},t._l(t.departmentList,(function(t){return a("el-option",{key:t.code,attrs:{label:t.name,value:t.code}})})),1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"btn-white",attrs:{size:"small"},on:{click:function(){t.staff.visibleMany=!1,t.onePickList=[],t.staffCheckList=[],t.departmentValue=[]}}},[t._v("取 消")]),a("el-button",{staticClass:"btn-blue",attrs:{size:"small"},on:{click:t.addManyConfirm}},[t._v("确 定")])],1)],1),a("el-dialog",{attrs:{width:"700px",title:"选择企业成员","before-close":t.pickManyBeforeClose,"close-on-click-modal":!1,visible:t.staff.manyIn},on:{"update:visible":function(e){return t.$set(t.staff,"manyIn",e)}}},[a("div",{staticClass:"dialog-content"},[a("div",{staticClass:"left-content"},[a("el-input",{staticClass:"input-with-select",staticStyle:{"margin-right":"10px"},attrs:{placeholder:"搜索"},model:{value:t.filterText,callback:function(e){t.filterText=e},expression:"filterText"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},slot:"append"})],1),a("el-tree",{ref:"tree",staticStyle:{"margin-top":"10px"},attrs:{data:t.staff.manyData,props:t.staff.props,"show-checkbox":"","filter-node-method":t.filterNode,"default-expand-all":!0,"node-key":"user_id"},on:{check:t.handleCheckStaff},scopedSlots:t._u([{key:"default",fn:function(e){e.node;var i=e.data;return a("span",{staticClass:"custom-tree-node"},[a("span",[t._v(t._s(i.name))])])}}])})],1),a("span",{staticClass:"line"}),a("div",{staticClass:"right-content"},[a("div",{staticClass:"tle"},[t._v("已选择"+t._s(t.staffCheckList.length)+"名成员")]),t._l(t.staffCheckList,(function(e,i){return a("div",{key:i,staticClass:"check"},[a("span",[t._v(t._s(e.name))]),a("i",{staticClass:"el-icon-circle-close",on:{click:function(){t.$refs.tree.setChecked(e.user_id,!1),t.staffCheckList.splice(i,1)}}})])}))],2)]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"btn-white",attrs:{size:"small"},on:{click:t.handlePickManyCancel}},[t._v("取 消")]),a("el-button",{staticClass:"btn-blue",attrs:{size:"small"},on:{click:t.handlePickManyConfirm}},[t._v("确 定")])],1)]),a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:t.staff.loading,expression:"staff.loading"}],attrs:{title:"选择企业成员",visible:t.staff.visibleSolo,"close-on-click-modal":!1,"before-close":function(){t.staff.visibleSolo=!1,0!==t.pickStaffList.length?t.pickStaff=t.pickStaffList[0]:t.pickStaff=""},width:"500px"},on:{"update:visible":function(e){return t.$set(t.staff,"visibleSolo",e)}}},[a("el-form",{staticStyle:{"margin-top":"20px"},attrs:{"label-position":"left"}},[a("el-form-item",{attrs:{label:"选择企业成员","label-width":"120px",required:""}},[a("el-select",{attrs:{"value-key":"user_id",placeholder:"请选择成员"},model:{value:t.pickStaff,callback:function(e){t.pickStaff=e},expression:"pickStaff"}},t._l(t.staff.soloData,(function(t){return a("el-option",{key:t.user_id,attrs:{label:t.name,value:t}})})),1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"btn-white",attrs:{size:"small"},on:{click:function(){t.staff.visibleSolo=!1,0!==t.pickStaffList.length?t.pickStaff=t.pickStaffList[0]:t.pickStaff=""}}},[t._v("取 消")]),a("el-button",{staticClass:"btn-blue",attrs:{size:"small"},on:{click:function(){t.pickStaff?(t.pickStaffList=[],t.pickStaffList.push(t.pickStaff),t.staff.visibleSolo=!1):t.$message.warning("请选择企业成员！")}}},[t._v("确 定")])],1)],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:3===t.active,expression:"active === 3"}],staticClass:"form"},[a("div",{staticClass:"switch"},[a("span",{staticClass:"label"},[t._v("扫码推送欢迎语")]),a("el-switch",{attrs:{"active-color":"#6881EC"},model:{value:t.form.scanCodeSwitch,callback:function(e){t.$set(t.form,"scanCodeSwitch",e)},expression:"form.scanCodeSwitch"}}),a("span",{staticClass:"last-text"},[t._v("（关闭后，将不再推送此活码设置的欢迎语，仅推送【系统欢迎语】,若已在企微后台为成员配置欢迎语，则此欢迎语无效，仅推送【系统欢迎语】）")])],1),a("div",{directives:[{name:"show",rawName:"v-show",value:t.form.scanCodeSwitch,expression:"form.scanCodeSwitch"}],staticClass:"phone-main"},[a("div",{staticClass:"phone"},[a("div",{staticClass:"top-head"}),a("div",{staticClass:"content"},[a("div",{staticClass:"content-main"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.textLength,expression:"textLength"}],staticClass:"message"},[a("img",{staticClass:"avatar-left",attrs:{src:i("4d41"),width:"32px"}}),a("div",{ref:"input-text",staticClass:"input-value"})]),a("div",{staticClass:"message"},[a("img",{directives:[{name:"show",rawName:"v-show",value:t.image.submit||t.link.submit||t.mini.submit||t.href.submit,expression:"image.submit || link.submit || mini.submit || href.submit"}],staticClass:"avatar-left",attrs:{src:i("4d41"),width:"32px",alt:""}}),2===t.contType&&t.image.submit?a("div",{staticClass:"imgBox"},[a("img",{staticClass:"pic",attrs:{src:t.image.data.content,alt:""}})]):3===t.contType&&t.link.submit?a("div",{staticClass:"link"},[a("p",{staticClass:"link-title"},[t._v(t._s(t.link.data.title))]),a("div",[a("span",{staticClass:"link-desc"},[t._v(t._s(t.link.data.summary))]),a("img",{staticClass:"link-cover",attrs:{src:t.link.data.cover,alt:""}})])]):6===t.contType&&t.mini.submit?a("div",{staticClass:"mini"},[a("p",{staticClass:"mini-title"},[t._v(t._s(t.mini.data.title))]),a("div",[a("img",{staticClass:"mini-cover",attrs:{src:t.mini.data.cover,alt:""}})])]):8===t.contType&&t.href.submit?a("div",{staticClass:"link"},[a("p",{staticClass:"link-title"},[t._v(t._s(t.href.data.title))]),a("div",[a("span",{staticClass:"link-desc"},[t._v(t._s(t.href.data.summary))]),a("img",{staticClass:"link-cover",attrs:{src:t.href.data.cover,alt:""}})])]):t._e()])])]),a("div",{staticClass:"phone-foot"})]),a("div",{staticClass:"main-right"},[a("div",{staticClass:"operate"},[a("div",{ref:"custom-textarea",staticClass:"custom-textarea",attrs:{contenteditable:"true",id:"textarea"},on:{input:t.changeText}}),a("span",[t._v(t._s(t.textLength)+"/1000")]),a("div",{staticClass:"btn"},[a("span",[t._v("点击插入：")]),a("el-button",{staticClass:"btn-orange",attrs:{size:"small"},on:{click:t.handleAddBtn}},[t._v("客户名称")])],1),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.image.submit&&!t.link.submit&&!t.mini.submit&&!t.texts.submit&&!t.href.submit,expression:"\n                !image.submit &&\n                !link.submit &&\n                !mini.submit &&\n                !texts.submit &&\n                !href.submit\n              "}],staticClass:"btns"},[a("el-button",{staticClass:"btn-white",attrs:{size:"small"},on:{click:function(){t.contType=1,t.type=1,t.reqGetContentGroupList(),t.pickVisible=!0}}},[t._v("添加快捷消息")]),a("el-button",{staticClass:"btn-white",attrs:{size:"small"},on:{click:function(){t.contType=2,t.type=2,t.reqGetContentGroupList(),t.pickVisible=!0}}},[t._v("添加图片")]),a("el-button",{staticClass:"btn-white",attrs:{size:"small"},on:{click:function(){t.type=3,t.contType=3,t.reqGetContentGroupList(),t.pickVisible=!0}}},[t._v("添加文章")]),a("el-button",{staticClass:"btn-white",attrs:{size:"small"},on:{click:function(){t.contType=6,t.reqGetContentGroupList(),t.type=6,t.pickVisible=!0}}},[t._v("添加小程序")]),a("el-button",{staticClass:"btn-white",attrs:{size:"small"},on:{click:function(){t.contType=8,t.reqGetContentGroupList(),t.type=8,t.pickVisible=!0}}},[t._v("添加跳转链接")])],1),a("div",{directives:[{name:"show",rawName:"v-show",value:2===t.contType&&t.image.submit,expression:"contType === 2 && image.submit"}],staticClass:"show-data"},[a("span",{on:{click:function(){t.pickVisible=!0}}},[a("img",{attrs:{src:t.image.data.content,width:"50",height:"50",alt:""}})]),a("i",{staticClass:"el-icon-close",on:{click:function(){t.image.data="",t.image.submit=!1,t.contId=""}}})]),a("div",{directives:[{name:"show",rawName:"v-show",value:1===t.contType&&t.texts.submit,expression:"contType === 1 && texts.submit"}],staticClass:"show-data"},[a("span",{on:{click:t.handleText}},[t._v(t._s(t.texts.data.content))]),a("i",{staticClass:"el-icon-close",on:{click:t.delText}})]),a("div",{directives:[{name:"show",rawName:"v-show",value:3===t.contType&&t.link.submit,expression:"contType === 3 && link.submit"}],staticClass:"show-data"},[a("i",{staticClass:"el-icon-link",on:{click:t.handleLink}}),a("span",{on:{click:t.handleLink}},[t._v(t._s(t.link.data.title))]),a("i",{staticClass:"el-icon-close",on:{click:function(){t.link.data="",t.link.changeData="",t.link.submit=!1,t.contId=""}}})]),a("div",{directives:[{name:"show",rawName:"v-show",value:8===t.contType&&t.href.submit,expression:"contType === 8 && href.submit"}],staticClass:"show-data"},[a("i",{staticClass:"el-icon-link",on:{click:t.handleHref}}),a("span",{on:{click:t.handleHref}},[t._v(t._s(t.href.data.title))]),a("i",{staticClass:"el-icon-close",on:{click:function(){t.href.data="",t.href.changeData="",t.href.submit=!1,t.contId=""}}})]),a("div",{directives:[{name:"show",rawName:"v-show",value:6===t.contType&&t.mini.submit,expression:"contType === 6 && mini.submit"}],staticClass:"show-data"},[a("svg",{staticClass:"icon",staticStyle:{cursor:"pointer"},attrs:{t:"1609929975914",viewBox:"0 0 1025 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"3010",width:"14",height:"14"},on:{click:t.handleMini}},[a("path",{attrs:{d:"M740.672 37.504c156.352 0 283.52 115.584 283.52 258.496 0 44.416-13.056 87.872-36.608 127.04-35.648 57.216-92.672 99.584-161.664 119.744a161.408 161.408 0 0 1-45.184 7.36 52.8 52.8 0 0 1-53.76-52.928c0-29.76 23.68-52.864 53.76-52.864 2.112 0 6.528 0 11.904-2.048 46.336-12.8 82.944-39.168 103.424-74.24 13.952-22.144 20.48-46.72 20.48-72.064 0-83.84-78.72-152.512-174.72-152.512a197.76 197.76 0 0 0-94.72 24.32c-50.816 28.544-80.896 76.16-80.896 128.192v443.904c0 89.984-50.752 172.672-134.848 219.328-45.184 25.408-96 38.272-147.712 38.272-156.288 0-283.52-115.648-283.52-258.56 0-44.352 13.12-87.872 36.608-127.04 35.648-57.216 92.736-99.584 161.664-119.68 19.328-5.312 32.384-7.36 45.184-7.36 30.272 0 53.824 23.36 53.824 52.864a52.8 52.8 0 0 1-53.76 52.928c-2.176 0-6.592 0-11.904 2.048-46.4 13.76-82.944 40.32-103.424 74.176-14.016 22.208-20.48 46.72-20.48 72.128 0 83.84 78.72 152.448 175.616 152.448a197.76 197.76 0 0 0 94.784-24.256c50.752-28.608 80.832-76.224 80.832-128.192V296.192c0-89.984 50.752-172.608 134.848-219.328a283.52 283.52 0 0 1 146.752-39.36z",fill:"#333333","p-id":"3011"}})]),a("span",{on:{click:t.handleMini}},[t._v(t._s(t.mini.data.title))]),a("i",{staticClass:"el-icon-close",on:{click:function(){t.mini.data="",t.mini.changeData="",t.mini.submit=!1,t.contId=""}}})])]),a("div",{staticClass:"btns"},[a("el-button",{staticClass:"btn-white",attrs:{size:"small"},on:{click:t.handlePrev}},[t._v("上一步")]),a("el-button",{staticClass:"btn-blue",attrs:{size:"small"},on:{click:t.handleCreateLiveCode}},[t._v(t._s(t.$route.query.id?"更新":"创建"))])],1)])]),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.form.scanCodeSwitch,expression:"!form.scanCodeSwitch"}],staticClass:"btns fiexd"},[a("el-button",{staticClass:"btn-white",attrs:{size:"small"},on:{click:t.handlePrev}},[t._v("上一步")]),a("el-button",{staticClass:"btn-blue",attrs:{size:"small"},on:{click:t.handleCreateLiveCode}},[t._v("创建")])],1)])]),a("el-dialog",{attrs:{title:"选择素材",visible:t.pickVisible,width:"630px","close-on-click-modal":!1},on:{"update:visible":function(e){t.pickVisible=e}}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.contLoading,expression:"contLoading"}],attrs:{"element-loading-text":"拼命加载中...","element-loading-spinner":"el-icon-loading"}},[a("div",{staticClass:"btns-top"},[t.contLoading?t._e():a("SelectTree",{attrs:{options:t.allContGroupList,props:t.contProps,accordion:!1,value:t.pickGroupId},on:{getValue:t.getPickGroupId}}),a("el-input",{staticStyle:{width:"220px"},attrs:{size:"small",placeholder:"输入标题/内容进行搜索",maxlength:"50"},model:{value:t.contSearch,callback:function(e){t.contSearch=e},expression:"contSearch"}}),a("el-button",{staticClass:"btn-blue",attrs:{size:"small"},on:{click:function(){t.ContentList()}}},[t._v("查找")]),a("el-button",{staticClass:"btn-white",attrs:{size:"small"},on:{click:function(){t.contSearch="",t.ContentList()}}},[t._v("清空")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:2===t.type,expression:"type === 2"}],staticClass:"btn-blue",attrs:{size:"small"},on:{click:function(){t.uploadVisible=!0}}},[t._v("本地上传")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:3===t.type,expression:"type === 3"}],staticClass:"btn-blue",attrs:{size:"small"},on:{click:function(){t.addTextImg=!0,t.pickVisible=!1}}},[t._v("新建")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:2!=t.type&&3!=t.type,expression:"type != 2 && type != 3"}],staticClass:"btn-blue",attrs:{size:"small"},on:{click:t.lookMaterial}},[t._v("新建")])],1),1==t.contType?a("div",{staticClass:"text-wrap"},[a("span",{directives:[{name:"show",rawName:"v-show",value:0===t.contList.length,expression:"contList.length === 0"}],staticStyle:{display:"inline-block",margin:"auto"}},[t._v("暂无数据")]),t._l(t.contList,(function(e,i){return a("div",{directives:[{name:"show",rawName:"v-show",value:0!==t.contList.length,expression:"contList.length !== 0"}],key:i,ref:e.id,refInFor:!0,on:{click:function(i){return t.handlePickImg(e)}}},[a("p",{staticClass:"content"},[t._v(t._s(e.content))])])}))],2):a("div",{staticClass:"img-wrap"},[a("span",{directives:[{name:"show",rawName:"v-show",value:0===t.contList.length,expression:"contList.length === 0"}],staticStyle:{display:"inline-block",margin:"auto"}},[t._v("暂无数据")]),t._l(t.contList,(function(e,i){return a("div",{directives:[{name:"show",rawName:"v-show",value:0!==t.contList.length&&1!=t.contType,expression:"contList.length !== 0 && contType != 1"}],key:i,ref:e.id,refInFor:!0,staticClass:"list",on:{click:function(i){return t.handlePickImg(e)}}},[a("img",{staticClass:"pick-img",attrs:{src:2===t.type?e.content:e.cover,alt:""}}),a("span",{staticClass:"bgc"},[t._v(t._s(e.file_name))])])}))],2),a("div",{directives:[{name:"show",rawName:"v-show",value:0!==t.contTotal,expression:"contTotal !== 0"}],staticClass:"pagination"},[a("el-pagination",{attrs:{"current-page":t.contPage,"page-sizes":[10,20,50,100],"page-size":t.contLimit,layout:"total, prev, pager, next, jumper",total:t.contTotal},on:{"size-change":function(e){t.contLimit=e,t.ContentList()},"current-change":function(e){t.contPage=e,t.ContentList()}}})],1)]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"btn-white",attrs:{size:"small"},on:{click:t.handlePickCancel}},[t._v("取 消")]),a("el-button",{staticClass:"btn-blue",attrs:{size:"small"},on:{click:t.handlePickConfirm}},[t._v("确 定")])],1)]),a("el-dialog",{attrs:{title:"上传图片素材",visible:t.uploadVisible,"close-on-click-modal":!1,width:"500px","before-close":function(e){t.uploadForm.uploadFile="",e()}},on:{"update:visible":function(e){t.uploadVisible=e}}},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:t.uploading,expression:"uploading"}],ref:"uploadForm",staticStyle:{"margin-top":"20px"},attrs:{"label-position":"left","label-width":"100px",model:t.uploadForm,rules:t.uploadRules}},[a("el-form-item",{staticStyle:{"margin-bottom":"10px"},attrs:{label:"上传图片",prop:"uploadFile"}},[a("el-upload",{class:t.hideUpload?"hide avatar-uploader":"avatar-uploader",attrs:{action:t.uploadUrl,data:t.uploadData,"show-file-list":!1,"on-change":t.handleUploadChange,"on-remove":t.handleUploadRemove,"on-success":t.reqUploadSuccess,"before-upload":t.beforeImgUpload}},[t.uploadForm.uploadFile?a("img",{staticClass:"avatar",attrs:{src:t.uploadForm.uploadFile}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),a("el-form-item",{staticStyle:{"font-size":"12px"}},[t._v("（图片大小不超过2M，支持JPG、JPEG及PNG格式）")])],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"btn-white",attrs:{size:"small"},on:{click:t.handleUploadCancel}},[t._v("取 消")]),a("el-button",{staticClass:"btn-blue",attrs:{size:"small"},on:{click:t.uploadSubmit}},[t._v("提 交")])],1)],1),a("el-dialog",{attrs:{title:"新增文章",visible:t.addTextImg,width:"1200px","close-on-click-modal":!1},on:{"update:visible":function(e){t.addTextImg=e},close:function(){t.$refs.formLabelAlign.resetFields(),t.type=3,t.contType=3,t.pickVisible=!0}}},[a("el-form",{ref:"formLabelAlign",staticClass:"scroll",attrs:{"label-width":"200px",model:t.formLabelAlign,rules:t.linkRules}},[a("el-form-item",{attrs:{label:"选择分组"}},[a("SelectTree",{attrs:{options:t.groupOptions,accordion:!1,value:t.formLabelAlign.content_group_id},on:{getValue:t.handleChange}})],1),a("el-form-item",{staticClass:"limitContent",attrs:{label:"标题",prop:"title",rules:[{required:!0,message:"请输入文章标题"}]}},[a("el-input",{attrs:{size:"small",placeholder:"输入文章标题（请勿输入特殊字符）",maxlength:"32","show-word-limit":""},model:{value:t.formLabelAlign.title,callback:function(e){t.$set(t.formLabelAlign,"title",e)},expression:"formLabelAlign.title"}})],1),a("el-form-item",{attrs:{label:"封面\n（建议尺寸200*200）",prop:"cover",rules:[{required:!0,message:"请选择封面图片"}]}},[t.formLabelAlign.cover?a("img",{staticClass:"avatar",attrs:{src:t.formLabelAlign.cover},on:{click:function(){t.contType=2,t.type=2,t.reqGetContentGroupList(),t.pickVisible=!0}}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon",on:{click:function(){t.contType=2,t.type=2,t.reqGetContentGroupList(),t.pickVisible=!0}}})]),a("el-form-item",{staticClass:"limitContent",attrs:{label:"摘要（选填）",prop:"summary",rules:[{required:!0,message:"请输入文章摘要"}]}},[a("el-input",{attrs:{size:"small",type:"textarea",resize:"none",placeholder:"请输入内容",maxlength:"128","show-word-limit":""},model:{value:t.formLabelAlign.summary,callback:function(e){t.$set(t.formLabelAlign,"summary",e)},expression:"formLabelAlign.summary"}})],1),a("el-form-item",{staticClass:"limitContent",attrs:{label:"作者（选填）"}},[a("el-input",{attrs:{size:"small",maxlength:"11","show-word-limit":""},model:{value:t.formLabelAlign.user,callback:function(e){t.$set(t.formLabelAlign,"user",e)},expression:"formLabelAlign.user"}})],1),a("el-form-item",{staticClass:"limitContent",attrs:{label:"原文链接（选填）",prop:"link"}},[a("el-input",{attrs:{size:"small"},model:{value:t.formLabelAlign.link,callback:function(e){t.$set(t.formLabelAlign,"link",e)},expression:"formLabelAlign.link"}})],1),a("el-form-item",{staticClass:"limitContent",attrs:{label:"说明（选填）"}},[a("el-input",{attrs:{size:"small",maxlength:"255","show-word-limit":""},model:{value:t.formLabelAlign.explain,callback:function(e){t.$set(t.formLabelAlign,"explain",e)},expression:"formLabelAlign.explain"}})],1),a("el-form-item",{attrs:{label:"正文",prop:"content",rules:[{required:!0,message:"请输编辑正文"}]}},[a("div",{staticClass:"content"},[a("editor-bar",{attrs:{isClear:t.isClear},on:{change:t.edtiorContentChange},model:{value:t.formLabelAlign.content,callback:function(e){t.$set(t.formLabelAlign,"content",e)},expression:"formLabelAlign.content"}})],1)])],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"btn-white",attrs:{size:"small"},on:{click:t.handleLinkCancel}},[t._v("取 消")]),a("el-button",{staticClass:"btn-blue",attrs:{size:"small"},on:{click:t.handleLinkConfirm}},[t._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"小程序",visible:t.proVisible,width:"700px","before-close":function(e){t.$refs.miniForm.resetFields(),e()},"close-on-click-modal":!1},on:{"update:visible":function(e){t.proVisible=e}}},[a("el-form",{ref:"miniForm",attrs:{"label-width":"100px",model:t.mini,rules:t.miniRules}},[a("el-form-item",{attrs:{label:"添加方式"}},[a("el-radio",{attrs:{label:"new"},model:{value:t.addType,callback:function(e){t.addType=e},expression:"addType"}},[t._v("新建")]),a("el-radio",{attrs:{label:"import"},model:{value:t.addType,callback:function(e){t.addType=e},expression:"addType"}},[t._v("导入")])],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"new"===t.addType,expression:"addType === 'new'"}],attrs:{label:"图片封面",prop:"cover"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:!t.mini.cover,expression:"!mini.cover"}],staticClass:"plus-wrap",on:{click:function(){t.type=2,t.pickVisible=!0}}},[a("i",{staticClass:"el-icon-plus"})]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.mini.cover,expression:"mini.cover"}],staticClass:"plus-wrap",staticStyle:{float:"left",position:"relative"}},[a("img",{attrs:{src:t.mini.cover,alt:""}}),a("el-button",{staticStyle:{color:"#6881ec",position:"absolute",bottom:"-14px",right:"-70px"},attrs:{type:"text"},on:{click:function(){t.type=2,t.pickVisible=!0}}},[t._v("重新选择")])],1)]),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"new"===t.addType,expression:"addType === 'new'"}],attrs:{label:"填写标题",prop:"title"}},[a("el-input",{attrs:{maxlength:"30","show-word-limit":""},model:{value:t.mini.title,callback:function(e){t.$set(t.mini,"title",e)},expression:"mini.title"}})],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"new"===t.addType,expression:"addType === 'new'"}],attrs:{label:"AppID",prop:"appid"}},[a("el-input",{attrs:{placeholder:"请填写小程序AppID，必须是关联到企业的小程序应用"},model:{value:t.mini.appid,callback:function(e){t.$set(t.mini,"appid",e)},expression:"mini.appid"}})],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"new"===t.addType,expression:"addType === 'new'"}],attrs:{label:"Page路径",prop:"pagePath"}},[a("el-input",{attrs:{placeholder:"请填写小程序路径,例如pages/index/index"},model:{value:t.mini.pagePath,callback:function(e){t.$set(t.mini,"pagePath",e)},expression:"mini.pagePath"}})],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"new"===t.addType,expression:"addType === 'new'"}],attrs:{label:"素材同步",required:""}},[a("el-radio",{attrs:{label:1},model:{value:t.mini.source,callback:function(e){t.$set(t.mini,"source",e)},expression:"mini.source"}},[t._v("素材库")]),a("el-radio",{attrs:{label:2},model:{value:t.mini.source,callback:function(e){t.$set(t.mini,"source",e)},expression:"mini.source"}},[t._v("同步至资料包")]),t.contLoading?t._e():a("SelectTree",{directives:[{name:"show",rawName:"v-show",value:1===t.mini.source,expression:"mini.source === 1"}],attrs:{options:t.contGroupList,props:t.contProps,accordion:!1,value:t.contGroupId},on:{getValue:t.getContGroupId}})],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"import"===t.addType,expression:"addType === 'import'"}],attrs:{label:"图文"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:""===t.mini.changeData,expression:"mini.changeData === ''"}],staticClass:"img-text",on:{click:function(){t.type=6,t.pickVisible=!0}}},[a("i",{staticClass:"el-icon-plus"})]),a("div",{directives:[{name:"show",rawName:"v-show",value:""!==t.mini.changeData,expression:"mini.changeData !== ''"}],staticClass:"img-text",on:{click:function(){t.type=6,t.pickVisible=!0}}},[a("i",{staticClass:"el-icon-success success"}),a("span",{staticClass:"desc"},[t._v("已选择一条小程序")]),a("span",{staticClass:"edit"},[t._v("修改")])])])],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"btn-white",attrs:{size:"small"},on:{click:t.handleMiniCancel}},[t._v("取 消")]),a("el-button",{staticClass:"btn-blue",attrs:{size:"small"},on:{click:t.handleMiniConfirm}},[t._v("确 定")])],1)],1),a("Material",{attrs:{materialVisible:t.materialVisible,types:t.types},on:{closepop:t.closepop}})],1)},s=[],n=(i("a623"),i("4de4"),i("c740"),i("4160"),i("c975"),i("a15b"),i("d81d"),i("13d5"),i("fb6a"),i("a434"),i("b0c0"),i("d3b7"),i("ac1f"),i("3ca3"),i("466d"),i("1276"),i("9911"),i("159b"),i("ddb0"),i("2b3d"),i("96cf"),i("1da1")),l=i("700d"),o=i("365c"),r=i("218e"),c=i("8237"),d=i.n(c),u=i("7157"),m={name:"AddCode",components:{SelectTree:r["a"],Material:l["a"],EditorBar:u["a"]},data:function(){var t=function(t,e,i){return e?e.match(/(http|https):\/\/\S*/gi)?i():i(new Error("请检查跳转链接格式是否正确（以http://或者https://开头）")):i(new Error("跳转链接不能为空"))};return{tool:[{text:"bibi标签",type:"tag"}],addTextImg:!1,isClear:!1,formLabelAlign:{content_group_id:"",summary:"",cover:"",content:"",user:"",link:"",wx_cover:"",title:"",explain:"",source:"",file_name:""},types:"",materialVisible:!1,pickVisible:!1,uploadVisible:!1,imgVisible:!1,proVisible:!1,disabledName:!1,active:1,loading:!0,AddSwitch:!1,textarea:"",radio:1,form:{name:"",liveCodeId:"",groupId:"",liveCodeName:"",switchValue:!0,staff:"",scanCodeSwitch:!0},label:{labelGroupName:"",labelValue:"",loading:!1,labelGroupId:"",visible:!1,groupName:"",title:""},labelRules:{labelValue:[{required:!0,message:"请输入标签名称",trigger:"blur"}],labelGroupName:[{required:!0,message:"请输入标签组名称",trigger:"blur"}]},numList:[],pickDepartment:[],spare_staff_id:"",labelIdList:[],pickTreeNode:[],groupOptions:[],options:[],defaultProps:{children:"group",label:"name"},staffNumber:0,staffCheckList:[],customLabelList:[],customLabelListLength:0,endIndex:3,fucusIndex:0,text:"",oldText:"",staff:{checked:!1,page:1,soloData:[],manyData:[],loading:!1,visibleMany:!1,visibleSolo:!1,manyIn:!1,search:"",props:{label:"name",children:"group"},soloName:""},pickStaff:"",pickStaffList:[],onePickList:[],pickStaffObj:"",departmentList:[],departmentValue:"",textLength:0,contGroupList:[],allContGroupList:[],contList:[],hideUpload:!1,contPage:1,contLimit:8,contLoading:!1,contGroupId:"",pickGroupId:"",contTotal:0,contSearch:"",contType:"",uploading:!1,uploadType:2,nowOperation:"",addType:Boolean(this.$route.query.id)?"import":"new",uploadUrl:"",contProps:{children:"son",label:"name"},uploadForm:{source:1,uploadFile:""},uploadRules:{uploadFile:[{required:!0,message:"请选择图片",trigger:"change"}]},image:{data:"",submit:!1},link:{cover:"",title:"",summary:"",source:1,link:"",data:"",changeData:"",submit:!1},linkRules:{cover:[{required:!0,message:"请选择封面图",trigger:"blur"}],title:[{required:!0,message:"请输入标题",trigger:"blur"}],link:[{validator:t,trigger:"blur",required:!0}],summary:[{trigger:"blur"}]},href:{cover:"",title:"",appid:"",pagePath:"",source:1,data:{},changeData:"",submit:!1},mini:{cover:"",title:"",appid:"",pagePath:"",source:1,data:{},changeData:"",submit:!1,media_id:""},texts:{cover:"",title:"",appid:"",pagePath:"",source:1,data:"",changeData:"",submit:!1},miniRules:{cover:[{required:!0,message:"请选择封面图",trigger:"blur"}],title:[{required:!0,message:"请输入标题",trigger:"blur"}],appid:[{required:!0,message:"请输入小程序AppID",trigger:"blur"}],pagePath:[{required:!0,message:"请输入小程序路径",trigger:"blur"}]},uploadData:{},uplSucInfo:"",pickLiveCodeData:"",pickData:"",type:2,contId:"",filterText:""}},watch:{$route:function(t,e){"AddCode"===e.name&&"CodeManage"==t.name&&this.$destroy()},pickData:function(t){var e=this;t||this.contList.forEach((function(t){e.$refs[t.id][0].classList.remove("l-active")}))},staff:{handler:function(t,e){var i=this;this.staff.soloData.forEach((function(e){t.soloValue===e.user_id&&(i.staff.soloName=e.name)}))},deep:!0},pickVisible:function(t){t&&this.getContentData()},addType:function(t){3===this.contType?(this.$refs["linkForm"].resetFields(),this.link.cover="",this.link.title="",this.link.summary="",this.link.source=1,this.link.link="",this.link.changeData=""):6===this.contType&&(this.$refs["miniForm"].resetFields(),this.mini.cover="",this.mini.title="",this.mini.appid="",this.mini.source=1,this.mini.pagePath="",this.mini.changeData=""),this.contId=""},contLoading:function(t){var e=this;t&&this.$nextTick((function(){e.contList.forEach((function(t){t.id===e.contId?e.$refs[t.id][0].classList.add("l-active"):e.$refs[t.id][0].classList.remove("l-active")}))}))},uploadForm:{handler:function(t,e){this.$refs.uploadForm.validateField("uploadFile")},deep:!0},radio:function(){Boolean(this.$route.query.id)||(this.pickDepartment=[],this.pickStaffList=[],this.departmentValue=[],this.onePickList=[],this.staffCheckList=[],this.numList=[],this.pickStaff="",this.AddSwitch=!1)},text:function(t){this.$refs["input-text"].innerHTML=t},pickGroupId:function(){this.ContentList()},numList:{handler:function(t){for(var e=0;e<t.length;e++)t[e].num<=0||""===t[e].num?t[e].num=1:t[e].num>=500&&(t[e].num=500)},deep:!0},filterText:function(t){this.$refs.tree.filter(t)}},computed:{contentName:function(){if(0!==this.staffCheckList.length){var t="";return this.staffCheckList.forEach((function(e){t+=e.name+" "})),t}return""}},mounted:function(){this.form.groupId=this.$route.query.groupId,this.getInit()},created:function(){},methods:{addTag:function(t,e){},chooseImg:function(){this.pickVisible=!0},edtiorContentChange:function(t){this.formLabelAlign.content=t},handleChange:function(t){this.formLabelAlign.content_group_id=t},getInit:function(){var t=this,e=parseInt((new Date).getTime()/1e3),i=localStorage.getItem("user_id")||"",a=localStorage.getItem("token")||"",s=d()(i+a+e+d()("shenlanguoshiphoto"));this.uploadData.time=e,this.uploadData.user_id=i,this.uploadData.token=a,this.uploadData.sign=s,this.uploadData.type=2,this.uploadUrl=o["Fb"];this.$refs["custom-textarea"],this.$refs["input-text"];var n=[];n[0]=Object(o["X"])({}),n[1]=Object(o["U"])({}),n[2]=Object(o["cb"])({page:this.staff.page,limit:1e4}),n[3]=Object(o["ab"])({}),n[4]=Object(o["W"])({}),Promise.all(n).then((function(e){t.loading=!1,200===e[0].code?t.groupOptions=e[0].data:t.groupOptions=[],200===e[1].code?(t.customLabelList=e[1].data,t.customLabelListLength=e[1].data.length):(t.customLabelList=[],t.customLabelListLength=0),200===e[2].code?t.staff.soloData=e[2].data:t.staff.soloData=[],200===e[3].code?t.staff.manyData=e[3].data:t.staff.manyData=[],200===e[4].code?t.departmentList=e[4].data:t.departmentList=[],t.$route.query.id&&(t.form.liveCodeId=t.$route.query.id,t.getEditInfo(t.$route.query.id)),console.log(t.form.liveCodeId)}))},getEditInfo:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function i(){var a,s,n,l,r,c;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return e.loading=!0,i.next=3,Object(o["vb"])({id:t});case 3:a=i.sent,200===a.code?(e.loading=!1,s=JSON.parse(JSON.stringify(a.data)),e.form.groupId=s.group_id,e.form.liveCodeName=s.name,0!==s.tag_name.length&&(e.labelIdList=s.tag_ids.split(","),e.labelIdList.forEach((function(t){e.$nextTick((function(){e.$refs[t][0].$el.classList.add("btn-blue")}))}))),"多人"===s.code_type?e.radio=2:"单人"===s.code_type&&(e.radio=1),s.add_limit&&(e.numList=s.add_limit),1===s.is_add_friends?e.form.switchValue=!0:0===s.is_add_friends&&(e.form.switchValue=!1),s.wxk_department_id&&(e.pickDepartment=[],s.wxk_department_id.split(",").forEach((function(t){e.departmentList.forEach((function(i){t==i.code&&e.pickDepartment.push(i)}))}))),s.wxk_staff_id&&(e.pickStaffList=[],e.staffCheckList=[],s.wxk_staff_id.split(",").forEach((function(t){e.staff.soloData.forEach((function(i){t==i.user_id&&(e.pickStaffList.push(i),e.staffCheckList.push(i))}))}))),1===s.is_add_limit?e.AddSwitch=!0:0===s.is_add_limit&&(e.AddSwitch=!1),e.spare_staff_id=s.spare_staff_id,e.form.scanCodeSwitch=Boolean(s.is_welcome_msg),1===s.is_welcome_msg&&(n=e.$refs["custom-textarea"],l=e.$refs["input-text"],r='<span contenteditable="false" class="custom-span">客户名称</span>',c=s.welcome_data,c.text&&(n.innerHTML=c.text.content.split("{name}").join(r),l.innerHTML=n.innerHTML,e.textLength=n.textContent.length,e.text=n.innerHTML),console.log(c),c.link?(e.contType=3,e.link.data=c.link,e.link.data.cover=c.link.picurl,e.link.data.link=c.link.url,e.link.data.summary=c.link.desc,e.link.submit=!0):c.image?(e.contType=2,e.image.data=c.image,e.image.data.content=c.image.pic_url,e.image.submit=!0,e.reqGetMediaId(c.image.media_id)):c.miniprogram&&(console.log(c.miniprogram),e.contType=6,e.mini.submit=!0,e.mini.data.media_id=c.miniprogram.pic_media_id,e.mini.data.applets_id=c.miniprogram.appid,e.mini.data.applets_path=c.miniprogram.page,e.mini.data.title=c.miniprogram.title,e.reqGetMediaId(c.miniprogram.pic_media_id)))):e.$message.error(a.msg);case 5:case"end":return i.stop()}}),i)})))()},reqGetMediaId:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function i(){var a,s;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(6!==e.contType){i.next=7;break}return i.next=3,Object(o["bb"])({type:6,media_id:t});case 3:a=i.sent,200==a.code&&(e.mini.data.cover=a.data.cover,e.mini.submit=!0,console.log(e.mini.data)),i.next=12;break;case 7:if(2!==e.contType){i.next=12;break}return i.next=10,Object(o["bb"])({type:2,media_id:t});case 10:s=i.sent,200==s.code&&(e.contId=s.data.id);case 12:case"end":return i.stop()}}),i)})))()},reqGetLiveCodeGroupList:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(o["X"])({});case 2:i=e.sent,200===i.code?t.groupOptions=i.data:t.groupOptions=[];case 4:case"end":return e.stop()}}),e)})))()},reqGetCustomTree:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.label.loading=!0,e.next=3,Object(o["U"])({});case 3:i=e.sent,t.label.loading=!1,200===i.code?(t.customLabelList=i.data,t.customLabelListLength=i.data.length):(t.customLabelList=[],t.customLabelListLength=0);case 6:case"end":return e.stop()}}),e)})))()},reqAddCustomLabel:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function i(){var a;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,Object(o["s"])(t);case 2:a=i.sent,200===a.code?(e.reqGetCustomTree(),e.label.visible=!1,e.$message.success(a.msg)):e.$message.error(a.msg);case 4:case"end":return i.stop()}}),i)})))()},reqGetSoloStaff:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(o["cb"])({page:t.staff.page,limit:1e3});case 2:i=e.sent,200===i.code?t.staff.soloData=i.data:t.staff.soloData=[];case 4:case"end":return e.stop()}}),e)})))()},reqGetManyStaff:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(o["ab"])({});case 2:i=e.sent,200===i.code?t.staff.manyData=i.data:t.staff.manyData=[];case 4:case"end":return e.stop()}}),e)})))()},delText:function(){this.texts.data="",this.texts.changeData="",this.texts.submit=!1,this.contId="";var t=this.$refs["custom-textarea"];this.text=t.innerHTML="",this.textLength=t.textContent.length},reqGetDepartmentList:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(o["W"])({});case 2:i=e.sent,200===i.code?t.departmentList=i.data:t.departmentList=[];case 4:case"end":return e.stop()}}),e)})))()},reqAddLiveQr:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function i(){var a;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,Object(o["u"])(t);case 2:a=i.sent,200===a.code?(e.$message.success(a.msg),e.$router.push("/live_code/manage")):e.$message.error(a.msg);case 4:case"end":return i.stop()}}),i)})))()},reqGetContentGroupList:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.contLoading=!0,e.next=3,Object(o["Q"])({});case 3:i=e.sent,200===i.code?(t.contGroupList=JSON.parse(JSON.stringify(i.data.data)),t.allContGroupList=JSON.parse(JSON.stringify(i.data.data)),t.allContGroupList.unshift({id:"",name:"所有"}),t.pickGroupId="",t.contGroupId=JSON.parse(JSON.stringify(i.data.data))[0].id):(t.contGroupList=[],t.allContGroupList=[],t.pickGroupId="",t.contGroupId=""),t.contLoading=!1;case 6:case"end":return e.stop()}}),e)})))()},ContentList:function(){var t=arguments,e=this;return Object(n["a"])(regeneratorRuntime.mark((function i(){var a,s;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return a=t.length>0&&void 0!==t[0]&&t[0],i.next=3,Object(o["i"])({type:e.type,content_group_id:e.pickGroupId,search_name:e.contSearch,page:e.contPage,limit:e.contLimit});case 3:s=i.sent,200==s.code?(e.contList=s.data.data,a&&(e.contId=s.data.data[0].id),e.$nextTick((function(){e.contList.forEach((function(t){t.id===e.contId?e.$refs[t.id][0].classList.add("l-active"):e.$refs[t.id][0].classList.remove("l-active")}))}))):e.contList=[];case 5:case"end":return i.stop()}}),i)})))()},ContentAdd:function(t){var e=arguments,i=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.length>1&&void 0!==e[1]&&e[1],i.uploading=!0,a.next=4,Object(o["a"])(t);case 4:s=a.sent,i.uploading=!1,200===s.code?(i.contId="",i.uploadVisible=!1,i.ContentList(!0)):i.$message.error(s.msg);case 7:case"end":return a.stop()}}),a)})))()},filterNode:function(t,e){return!t||-1!==e.name.indexOf(t)},pickManyBeforeClose:function(t){var e=this;t(),this.staffCheckList=JSON.parse(JSON.stringify(this.pickStaffList)),this.$nextTick((function(){e.$refs.tree.setCheckedNodes([])}))},handlePickManyCancel:function(){this.staff.manyIn=!1},handlePickManyConfirm:function(){this.onePickList=JSON.parse(JSON.stringify(this.staffCheckList)),this.staff.manyIn=!1},pickManyStaff:function(){var t=this;this.staff.manyIn=!0,this.$nextTick((function(){t.$refs.tree.setCheckedNodes(t.staffCheckList)}))},addManyConfirm:function(){var t=this;0!==this.departmentValue.length||0!==this.staffCheckList.length?(this.pickDepartment=[],this.departmentList.forEach((function(e){t.departmentValue.forEach((function(i){e.code==i&&t.pickDepartment.push(e)}))})),this.pickStaffList=this.onePickList,0===this.pickStaffList.length&&(this.AddSwitch=!1),this.staff.visibleMany=!1):this.$message.warning("请选择部门或者企业成员！")},changeAddswitch:function(t){var e=this;1===this.radio?0!==this.pickStaffList.length?(this.numList=[],this.pickStaffList.map((function(t,i){e.numList.push({name:t.name,user_id:t.user_id,num:100})})),this.AddSwitch=t):(this.AddSwitch=!1,this.$message.warning("请先选择成员")):2===this.radio&&(0!==this.pickStaffList.length?(this.numList=[],this.pickStaffList.map((function(t,i){e.numList.push({name:t.name,user_id:t.user_id,num:100})})),this.AddSwitch=t):(0!==this.pickDepartment.length?this.$message.warning("因受官方限制，无法对动态部门的员工设置添加好友上限"):this.$message.warning("请先选择成员"),this.AddSwitch=!1))},handlePickCancel:function(){var t=this;this.pickVisible=!1,this.pickData="",this.contList.forEach((function(e){e.id===t.contId?t.$refs[e.id][0].classList.add("l-active"):t.$refs[e.id][0].classList.remove("l-active")}))},handlePickConfirm:function(){var t=this;this.pickData.id&&(this.contId=this.pickData.id),this.contId?(this.contList.forEach((function(e){if(e.id===t.contId)if(2===t.contType)1==t.addTextImg?(t.formLabelAlign.cover=e.content,t.formLabelAlign.file_name=e.file_name,t.type=3):(t.image.data=e,t.image.submit=!0);else if(3===t.contType)t.link.changeData=e,t.link.data=t.link.changeData,t.imgVisible=!1,t.link.submit=!0;else if(6===t.contType)t.mini.changeData=e,t.mini.submit=!0,t.mini.data=t.mini.changeData;else if(1===t.contType){var i=t.$refs["custom-textarea"];t.text=i.innerHTML=e.content=e.content,t.textLength=i.textContent.length,t.texts.changeData=e,t.texts.submit=!0,t.texts.data=t.texts.changeData}else 8===t.contType&&(t.href.changeData=e,t.href.submit=!0,t.href.data=t.href.changeData)})),this.pickVisible=!1):this.$message.warning("请选择素材！")},handleLinkConfirm:function(){var t=this;this.contType=3,this.$refs["formLabelAlign"].validate(function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(i){var a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!i){e.next=7;break}return a=[],a.push({content_group_id:t.formLabelAlign.content_group_id,type:"3",user:t.formLabelAlign.user,title:t.formLabelAlign.title,content:t.formLabelAlign.content,cover:t.formLabelAlign.cover,wx_cover:t.formLabelAlign.wx_cover,summary:t.formLabelAlign.summary,link:t.formLabelAlign.link,explain:t.formLabelAlign.explain,user_id:localStorage.getItem("phone"),source:1,file_name:t.formLabelAlign.file_name}),e.next=5,Object(o["a"])({arr:a});case 5:s=e.sent,"200"==s.code?(t.addTextImg=!1,t.reqGetContentGroupList(),t.$message.success(s.msg)):t.$message.error(s.msg);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},handleLinkCancel:function(){this.$refs["formLabelAlign"].resetFields(),this.addTextImg=!1},handleMiniConfirm:function(){var t=this;this.contType=6,"new"===this.addType?this.$refs["miniForm"].validate((function(e){if(e){var i={},a={type:6};a.user=localStorage.getItem("phone")||"",a.title=t.mini.title,t.mini.data.title=t.mini.title,t.mini.data.cover=t.mini.data.content,a.content=t.mini.data.content,a.cover=t.mini.cover,a.media_id=t.mini.data.media_id,a.created_at=t.mini.data.created_at,a.source=t.mini.data.source,a.applets_id=t.mini.appid,a.applets_path=t.mini.pagePath,a.content_group_id=t.contGroupId,t.mini.data.applets_id=t.mini.appid,t.mini.data.applets_path=t.mini.pagePath,i.arr=[],i.arr.push(a),t.ContentAdd(i,!0)}})):"import"===this.addType&&(this.mini.changeData?(this.proVisible=!1,this.mini.submit=!0,this.mini.data=this.mini.changeData):this.$message.warning("请选择小程序！"))},handleMiniCancel:function(){this.$refs["miniForm"].resetFields(),this.mini.changeData="",this.proVisible=!1},getContGroupId:function(t){this.contGroupId=t},getPickGroupId:function(t){this.pickGroupId=t},beforeImgUpload:function(t){var e="image/jpg"===t.type,i="image/jpeg"===t.type,a="image/png"===t.type,s=t.size/1024/1024<=2;return e||i||a?s||this.$message.error("上传图片大小不能超过 2MB!"):this.$message.error("上传图片只能是 JPG、JPEG、PNG 格式!"),e&&s||s&&i||s&&a},uploadSubmit:function(){var t=this;this.$refs["uploadForm"].validate((function(e){e&&(t.uplSucInfo.type=2,t.uplSucInfo.user=localStorage.getItem("phone"),t.uplSucInfo.source=t.uploadForm.source,t.ContentAdd({arr:[t.uplSucInfo]}))}))},reqUploadSuccess:function(t,e){this.uploadForm.uploadFile=URL.createObjectURL(e.raw),this.uplSucInfo=t.data},handlePickImg:function(t){var e=this;this.contList.forEach((function(t){e.$refs[t.id][0].classList.remove("l-active")})),this.$refs[t.id][0].classList.add("l-active"),this.pickData=t},handleUploadCancel:function(){this.uploadForm.uploadFile="",this.uploadVisible=!1,this.$refs.uploadForm.resetFields()},handleUploadChange:function(t,e){this.hideUpload=e.length>=1},handleUploadRemove:function(t,e){this.uploadForm.uploadFile="",this.hideUpload=e.length>=1},getContentData:function(){var t=this;this.contLoading=!0;var e=[];e[0]=Object(o["Q"])({}),e[1]=Object(o["i"])({search_name:"",type:this.type,content_group_id:"",page:this.contPage,limit:this.contLimit}),Promise.all(e).then((function(e){t.contLoading=!1,200===e[0].code?0!==e[0].data.data.length&&(t.contGroupList=JSON.parse(JSON.stringify(e[0].data.data)),t.allContGroupList=JSON.parse(JSON.stringify(e[0].data.data)),t.allContGroupList.unshift({id:"",name:"所有"}),t.contGroupId=JSON.parse(JSON.stringify(e[0].data.data))[0].id,t.pickGroupId=""):(t.$message.error(e[0].msg),t.contGroupList=[],t.allContGroupList=[],t.contGroupId="",t.pickGroupId=""),200===e[1].code?(t.contTotal=e[1].data.total,t.contList=e[1].data.data,t.$nextTick((function(){t.contList.forEach((function(e){e.id===t.contId?t.$refs[e.id][0].classList.add("l-active"):t.$refs[e.id][0].classList.remove("l-active")}))}))):(t.$message.error(e[1].msg),t.contList=[],t.contTotal=0)}))},handleCreateLiveCode:function(){var t="",e="",i="",a="",s="",n=(document.getElementById("textarea"),'<span contenteditable="false" class="custom-span">客户名称</span>'),l={},o=[];if(1===this.radio&&this.AddSwitch){o=[];var r={};r.user_id=this.pickStaffList[0].user_id,r.num=this.numList[0].num,o.push(r)}else 2===this.radio&&this.AddSwitch&&0!==this.numList.length&&(o=[],this.numList.forEach((function(t){var e={};e.user_id=t.user_id,e.num=t.num,o.push(e)})));s=this.text.split(n).join("{name}"),t=this.form.switchValue?1:0,i=this.AddSwitch?1:0,0!==this.labelIdList.length&&(a=this.labelIdList.join(","));var c={group_id:this.form.groupId,name:this.form.liveCodeName,is_add_friends:t,is_add_limit:i,tag_ids:a,code_type:this.radio,is_welcome_msg:e};if(e=this.form.scanCodeSwitch?1:0,1===i&&(c.spare_staff_id=this.spare_staff_id),this.AddSwitch&&(c.add_limit=o,c.spare_staff_id=this.spare_staff_id),1==this.radio)c.wxk_staff_id=this.pickStaffList[0].user_id;else if(2==this.radio&&0!==this.pickStaffList.length){var d=[];this.pickStaffList.map((function(t){d.push(t.user_id)})),c.wxk_staff_id=d.join(",")}if(this.$route.query.id&&(c.id=this.$route.query.id),0!==this.pickDepartment.length){var u=[];this.pickDepartment.forEach((function(t){u.push(t.code)})),c.wxk_department_id=u.join(",")}this.form.scanCodeSwitch?s||this.image.submit||this.link.submit||this.mini.submit||this.texts.submit||this.href.submit?(s&&(s=s.split("<div>").join("<br>").split("</div>").join("").split("<p>").join("<br>").split("</p>").join(""),l.text={},l.text.content=s),console.log(this.image.submit),console.log(this.link.submit),console.log(this.href.submit),console.log(this.mini.submit),this.image.submit?l.image={media_id:this.image.data.media_id,pic_url:this.image.data.content}:this.link.submit?l.link={title:this.link.data.title,picurl:this.link.data.cover,desc:this.link.data.explain,url:this.link.data.link?this.link.data.link:this.baseURL+"/article-preview/huankemao_h5.html?id="+this.link.data.id+"&type=1"}:this.mini.submit?(console.log(this.mini.data),l.miniprogram={title:this.mini.data.title,pic_media_id:this.mini.data.media_id,appid:this.mini.data.applets_id,page:this.mini.data.applets_path}):this.href.submit&&(l.link={title:this.href.data.title,picurl:this.href.data.cover,desc:this.href.data.summary,url:this.href.data.link}),c.is_welcome_msg=e,c.welcome_data=l,this.reqAddLiveQr(c)):this.$message.warning("最少推送一种类型"):(c.is_welcome_msg=e,this.reqAddLiveQr(c))},handleCheckStaff:function(t,e){var i=e.checkedNodes,a={};i=i.reduce((function(t,e){return!a[e.user_id]&&(a[e.user_id]=t.push(e)),t}),[]),this.staffCheckList=i.filter((function(t){return t.user_id}))},getSelectTreeValue:function(t){this.form.groupId=t},handleBack:function(){this.$router.push("/live_code/manage")},handlePickLabel:function(t){var e=this.$refs[t][0].$el;e.classList.toggle("btn-blue")?this.labelIdList.length<20?this.labelIdList.push(t):(e.classList.remove("btn-blue"),this.$message.warning("客户标签最多设置20个")):this.labelIdList.splice(this.labelIdList.findIndex((function(e){return e.id===t})),1)},handleAddLabel:function(t){this.label.labelGroupName=t.name,this.label.labelGroupId=t.id,this.label.visible=!0,this.label.labelValue="",this.label.title="新增标签"},handleAddLabelGroup:function(){this.label.title="新增标签组",this.label.labelGroupName="",this.label.labelValue="",this.label.labelGroupId="",this.label.visible=!0},handleSubmitLabel:function(){var t=this;"新增标签"===this.label.title?this.$refs.labelForm1.validate((function(e){if(e){var i=[],a=!0;i=t.label.labelValue.split(" "),i=i.filter((function(t){return 0!=t})),a=i.every((function(t){return t.length<=15})),a?(i.map((function(t,e){i[e]={name:t}})),t.reqAddCustomLabel({group_id:t.label.labelGroupId,tag:i})):t.$message.warning("每个标签最多15个字")}})):this.$refs.labelForm2.validate((function(e){if(e){var i=[],a=!0;i=t.label.labelValue.split(" "),i=i.filter((function(t){return 0!=t})),a=i.every((function(t){return t.length<=15})),a?(i.map((function(t,e){i[e]={name:t}})),t.reqAddCustomLabel({group_name:t.label.labelGroupName,tag:i})):t.$message.warning("每个标签最多15个字")}}))},dialogBeforeClose:function(t){this.$refs["labelForm1"].resetFields(),this.$refs["labelForm2"].resetFields(),t()},handleNext:function(){1===this.active?""===this.form.groupId?this.$message.warning("请选择分组"):""===this.form.liveCodeName?this.$message.warning("请输入活码名称"):this.active=2:2===this.active&&(this.AddSwitch?this.spare_staff_id?1===this.radio?0!==this.pickStaffList.length?this.active=3:this.$message.warning("请添加企业成员！"):2===this.radio&&(0!==this.pickStaffList.length||0!==this.pickDepartment.length?this.active=3:this.$message.warning("请添加企业成员或部门！")):this.$message.warning("请选择备用员工"):1===this.radio?0!==this.pickStaffList.length?this.active=3:this.$message.warning("请添加企业成员！"):2===this.radio&&(0!==this.pickStaffList.length||0!==this.pickDepartment.length?this.active=3:this.$message.warning("请添加企业成员或部门！")))},handlePrev:function(){this.active--},handleAddBtn:function(){var t=this.$refs["custom-textarea"];t.focus();var e='<span contenteditable="false" class="custom-span">客户名称</span>';1e3-this.textLength>=4&&(this.pasteHtmlAtCaret(e),this.text=t.innerHTML,this.textLength=t.textContent.length)},pasteHtmlAtCaret:function(t){var e,i;if(window.getSelection){if(e=window.getSelection(),e.getRangeAt&&e.rangeCount){i=e.getRangeAt(0),i.deleteContents();var a=document.createElement("div");a.innerHTML=t;var s,n,l=document.createDocumentFragment();while(s=a.firstChild)n=l.appendChild(s);i.insertNode(l),n&&(i=i.cloneRange(),i.setStartAfter(n),i.collapse(!0),e.removeAllRanges(),e.addRange(i))}}else document.selection&&"Control"!=document.selection.type&&document.selection.createRange().pasteHTML(t)},po_Last_Div:function(t){if(window.getSelection){t.focus();var e=window.getSelection();e.selectAllChildren(t),e.collapseToEnd()}else if(document.selection){e=document.selection.createRange();e.moveToElementText(t),e.collapse(!1),e.select()}},changeText:function(t){var e=this.$refs["custom-textarea"];this.text=e.innerHTML,this.textLength=e.textContent.length,this.textLength>=1e3&&(this.textLength=1e3,this.text=e.textContent.slice(0,this.textLength+1),e.innerHTML=this.text)},handleEditPick:function(){var t=this;1===this.radio?this.staff.visibleSolo=!0:2===this.radio&&(this.staffCheckList=JSON.parse(JSON.stringify(this.pickStaffList)),this.onePickList=JSON.parse(JSON.stringify(this.pickStaffList)),this.departmentValue=[],this.pickDepartment.forEach((function(e){e.code&&t.departmentValue.push(e.code)})),this.staff.visibleMany=!0)},handleText:function(){this.text.cover=this.text.data.cover,this.text.summary=this.text.data.summary||"",this.text.title=this.text.data.title,this.text.link=this.text.data.link,this.text.changeData=this.text.data,this.imgVisible=!0},handleHref:function(){this.href.cover=this.href.data.cover,this.href.summary=this.href.data.summary||"",this.href.title=this.href.data.title,this.href.link=this.href.data.link,this.href.changeData=this.href.data,this.imgVisible=!0},handleLink:function(){this.link.cover=this.link.data.cover,this.link.summary=this.link.data.summary||"",this.link.title=this.link.data.title,this.link.link=this.link.data.link,this.link.changeData=this.link.data,this.imgVisible=!0},handleMini:function(){this.contType=6,this.reqGetContentGroupList(),this.type=6,this.pickVisible=!0},lookMaterial:function(){this.types=this.contType,3==this.types?(this.pickVisible=!1,this.$router.push({path:"/content/addgraphic",query:{path:this.$route.name,types:1}})):this.materialVisible=!0},closepop:function(){this.materialVisible=!1,this.types="",this.getContentData()}}},p=m,h=(i("3467"),i("d4c4"),i("2877")),f=Object(h["a"])(p,a,s,!1,null,"b6ad3176",null);e["default"]=f.exports},"13d5":function(t,e,i){"use strict";var a=i("23e7"),s=i("d58f").left,n=i("a640"),l=i("ae40"),o=i("2d00"),r=i("605d"),c=n("reduce"),d=l("reduce",{1:0}),u=!r&&o>79&&o<83;a({target:"Array",proto:!0,forced:!c||!d||u},{reduce:function(t){return s(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}})},3467:function(t,e,i){"use strict";i("3c98")},"3c98":function(t,e,i){},"466d":function(t,e,i){"use strict";var a=i("d784"),s=i("825a"),n=i("50c4"),l=i("1d80"),o=i("8aa5"),r=i("14c3");a("match",1,(function(t,e,i){return[function(e){var i=l(this),a=void 0==e?void 0:e[t];return void 0!==a?a.call(e,i):new RegExp(e)[t](String(i))},function(t){var a=i(e,t,this);if(a.done)return a.value;var l=s(t),c=String(this);if(!l.global)return r(l,c);var d=l.unicode;l.lastIndex=0;var u,m=[],p=0;while(null!==(u=r(l,c))){var h=String(u[0]);m[p]=h,""===h&&(l.lastIndex=o(c,n(l.lastIndex),d)),p++}return 0===p?null:m}]}))},"6f37":function(t,e,i){},a15b:function(t,e,i){"use strict";var a=i("23e7"),s=i("44ad"),n=i("fc6a"),l=i("a640"),o=[].join,r=s!=Object,c=l("join",",");a({target:"Array",proto:!0,forced:r||!c},{join:function(t){return o.call(n(this),void 0===t?",":t)}})},a434:function(t,e,i){"use strict";var a=i("23e7"),s=i("23cb"),n=i("a691"),l=i("50c4"),o=i("7b0b"),r=i("65f0"),c=i("8418"),d=i("1dde"),u=i("ae40"),m=d("splice"),p=u("splice",{ACCESSORS:!0,0:0,1:2}),h=Math.max,f=Math.min,b=9007199254740991,g="Maximum allowed length exceeded";a({target:"Array",proto:!0,forced:!m||!p},{splice:function(t,e){var i,a,d,u,m,p,v=o(this),k=l(v.length),w=s(t,k),x=arguments.length;if(0===x?i=a=0:1===x?(i=0,a=k-w):(i=x-2,a=f(h(n(e),0),k-w)),k+i-a>b)throw TypeError(g);for(d=r(v,a),u=0;u<a;u++)m=w+u,m in v&&c(d,u,v[m]);if(d.length=a,i<a){for(u=w;u<k-a;u++)m=u+a,p=u+i,m in v?v[p]=v[m]:delete v[p];for(u=k;u>k-a+i;u--)delete v[u-1]}else if(i>a)for(u=k-a;u>w;u--)m=u+a-1,p=u+i-1,m in v?v[p]=v[m]:delete v[p];for(u=0;u<i;u++)v[u+w]=arguments[u+2];return v.length=k-a+i,d}})},a623:function(t,e,i){"use strict";var a=i("23e7"),s=i("b727").every,n=i("a640"),l=i("ae40"),o=n("every"),r=l("every");a({target:"Array",proto:!0,forced:!o||!r},{every:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}})},c740:function(t,e,i){"use strict";var a=i("23e7"),s=i("b727").findIndex,n=i("44d2"),l=i("ae40"),o="findIndex",r=!0,c=l(o);o in[]&&Array(1)[o]((function(){r=!1})),a({target:"Array",proto:!0,forced:r||!c},{findIndex:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}}),n(o)},c975:function(t,e,i){"use strict";var a=i("23e7"),s=i("4d64").indexOf,n=i("a640"),l=i("ae40"),o=[].indexOf,r=!!o&&1/[1].indexOf(1,-0)<0,c=n("indexOf"),d=l("indexOf",{ACCESSORS:!0,1:0});a({target:"Array",proto:!0,forced:r||!c||!d},{indexOf:function(t){return r?o.apply(this,arguments)||0:s(this,t,arguments.length>1?arguments[1]:void 0)}})},d4c4:function(t,e,i){"use strict";i("6f37")},d58f:function(t,e,i){var a=i("1c0b"),s=i("7b0b"),n=i("44ad"),l=i("50c4"),o=function(t){return function(e,i,o,r){a(i);var c=s(e),d=n(c),u=l(c.length),m=t?u-1:0,p=t?-1:1;if(o<2)while(1){if(m in d){r=d[m],m+=p;break}if(m+=p,t?m<0:u<=m)throw TypeError("Reduce of empty array with no initial value")}for(;t?m>=0:u>m;m+=p)m in d&&(r=i(r,d[m],m,c));return r}};t.exports={left:o(!1),right:o(!0)}},d81d:function(t,e,i){"use strict";var a=i("23e7"),s=i("b727").map,n=i("1dde"),l=i("ae40"),o=n("map"),r=l("map");a({target:"Array",proto:!0,forced:!o||!r},{map:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}})}}]);
//# sourceMappingURL=chunk-6ff5215d.9099d04a.js.map