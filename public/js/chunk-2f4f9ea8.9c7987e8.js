(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2f4f9ea8"],{1110:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"index",attrs:{"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading"}},[s("div",{staticClass:"title"},[t._v(t._s(t.$route.meta.title))]),s("div",{staticClass:"flex-wrap"},[s("div",{staticClass:"main-left"},[s("div",{staticClass:"yl"},[t._m(0),t.ylBarFlag?s("div",{staticClass:"echarts",attrs:{id:"ylBar"}}):s("div",{staticClass:"notfound"},[s("img",{attrs:{src:a("a6917"),width:"100px",alt:""}}),s("span",[t._v("暂无数据")])])])]),s("div",{staticClass:"main-right"},[s("div",{staticClass:"hk"},[t._m(1),s("div",{staticClass:"pie-wrap"},[s("div",{staticClass:"month"},[s("el-progress",{attrs:{type:"circle","stroke-width":18,percentage:100,color:t.customColor,format:t.format}}),t._m(2)],1),s("div",{staticClass:"season"},[s("el-progress",{attrs:{type:"circle","stroke-width":18,percentage:25,color:t.customColor,format:t.format}}),t._m(3)],1),s("div",{staticClass:"year"},[s("el-progress",{attrs:{type:"circle","stroke-width":18,percentage:30,color:t.customColor,format:t.format}}),t._m(4)],1)])])]),s("div",{staticClass:"main-left"},[s("div",{staticClass:"khPie"},[t._m(5),s("div",{staticClass:"content"},[s("div",{staticClass:"pies"},[s("div",{staticClass:"echarts",attrs:{id:"allPie"}}),s("div",{staticClass:"legend"},[t._m(6),s("p",{staticClass:"num"},[t._v(t._s(t.total_customer.claimed||0))]),t._m(7),s("p",{staticClass:"num"},[t._v(t._s(t.total_customer.unclaimed||0))])]),s("div",{staticClass:"echarts",attrs:{id:"losePie"}}),s("div",{staticClass:"legend"},[t._m(8),s("p",{staticClass:"num"},[t._v(t._s(t.loss_customer.deleted_staff||0))]),t._m(9),s("p",{staticClass:"num"},[t._v(t._s(t.loss_customer.deleted_customer||0))])])]),s("div",{staticClass:"list"},[s("p",[s("span",[t._v("跟进中客户")]),s("span",[t._v(t._s(t.follow_total.under_follow||0))])]),s("p",[s("span",[t._v("未跟进客户")]),s("span",[t._v(t._s(t.follow_total.not_followed||0))])]),s("p",[s("span",[t._v("已成交客户")]),s("span",[t._v(t._s(t.follow_total.closed||0))])])]),s("div",{staticClass:"list"},[s("p",[s("span",[t._v("今日新增客户")]),s("span",[t._v(t._s(t.today_count.add_customer||0))])]),s("p",[s("span",[t._v("今日净增客户")]),s("span",[t._v(t._s(t.today_count.growth||0))])]),s("p",[s("span",[t._v("今日流失客户")]),s("span",[t._v(t._s(t.today_count.deleted_customer||0))])])])])])]),s("div",{staticClass:"main-right"},[s("div",{staticClass:"khBar"},[s("p",{staticClass:"main-head"},[s("span"),s("span",[t._v("客户增长趋势")]),s("el-button",{ref:"day",class:1===t.date_type?"btn-blue btn-active":"btn-white",staticStyle:{"margin-left":"auto"},attrs:{size:"small"},on:{click:function(e){t.date_type=1}}},[t._v("按日")]),s("el-date-picker",{directives:[{name:"show",rawName:"v-show",value:1===t.date_type,expression:"date_type === 1"}],staticClass:"date-active",staticStyle:{width:"260px"},attrs:{type:"daterange","value-format":"yyyy-MM-dd","range-separator":"至",clearable:!1,"start-placeholder":"开始日期","end-placeholder":"结束日期",size:"small"},model:{value:t.daysValue,callback:function(e){t.daysValue=e},expression:"daysValue"}}),s("el-button",{ref:"week",class:2===t.date_type?"btn-blue btn-active":"btn-white",staticStyle:{"margin-left":"20px"},attrs:{size:"small"},on:{click:function(e){t.date_type=2}}},[t._v("按周")]),s("el-date-picker",{directives:[{name:"show",rawName:"v-show",value:2===t.date_type,expression:"date_type === 2"}],staticClass:"date-active-center",staticStyle:{width:"160px"},attrs:{type:"week",format:"yyyy 第 WW 周","value-format":"yyyy-MM-dd","range-separator":"至",clearable:!1,"start-placeholder":"开始日期","end-placeholder":"结束日期",size:"small"},model:{value:t.daysValue[0],callback:function(e){t.$set(t.daysValue,0,e)},expression:"daysValue[0]"}}),s("el-date-picker",{directives:[{name:"show",rawName:"v-show",value:2===t.date_type,expression:"date_type === 2"}],staticClass:"date-active-left",staticStyle:{width:"160px"},attrs:{type:"week",format:"yyyy 第 WW 周","value-format":"yyyy-MM-dd",clearable:!1,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",size:"small"},model:{value:t.daysValue[1],callback:function(e){t.$set(t.daysValue,1,e)},expression:"daysValue[1]"}}),s("el-button",{ref:"month",class:3===t.date_type?"btn-blue btn-active":"btn-white",staticStyle:{"margin-left":"20px"},attrs:{size:"small"},on:{click:function(e){t.date_type=3}}},[t._v("按月")]),s("el-date-picker",{directives:[{name:"show",rawName:"v-show",value:3===t.date_type,expression:"date_type === 3"}],staticClass:"date-active",staticStyle:{width:"260px"},attrs:{size:"small",type:"monthrange",format:"yyyy-MM-dd",clearable:!1,"value-format":"yyyy-MM-dd","range-separator":"至","start-placeholder":"开始月份","end-placeholder":"结束月份"},model:{value:t.daysValue,callback:function(e){t.daysValue=e},expression:"daysValue"}})],1),s("div",{staticClass:"content"},[t._m(10),t.khBarFlag?s("div",{staticClass:"echarts",attrs:{id:"khAdd"}}):s("div",{staticClass:"notfound"},[s("img",{attrs:{src:a("a6917"),width:"100px",alt:""}}),s("span",[t._v("暂无数据")])])])])]),s("div",{staticClass:"main-left"},[s("div",{staticClass:"xsPie"},[t._m(11),s("div",{staticClass:"content"},[s("div",[s("el-progress",{attrs:{type:"dashboard",width:150,"stroke-width":18,percentage:30,color:t.customColor,format:t.format2}}),s("span",{staticClass:"top"},[t._v("转化率")]),t._m(12)],1),t._m(13),t._m(14)])])]),s("div",{staticClass:"main-right"},[s("div",{staticClass:"xsTable"},[t._m(15),s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"multipleTable",staticStyle:{"margin-top":"15px"},attrs:{"element-loading-text":"加载中...","element-loading-spinner":"el-icon-loading",height:"100%",data:t.tableData,"header-cell-style":{color:"#333",fontSize:"14px",backgroundColor:"#F6F7FB",fontWeight:"normal"}}},[s("el-table-column",{attrs:{label:"客户名称"}}),s("el-table-column",{attrs:{prop:"follow_add_way",label:"联系方式"}}),s("el-table-column",{attrs:{label:"添加日期"}}),s("el-table-column",{attrs:{prop:"address",label:"状态"}}),s("el-table-column",{attrs:{label:"操作"}})],1)],1)])])])},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",{staticClass:"main-head"},[a("span"),a("span",[t._v("引流数据统计")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",{staticClass:"main-head"},[a("span"),a("span",[t._v("获客计划进度")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",[a("span",[t._v("月度完成进度")]),a("span",[t._v("已完成")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",[a("span",[t._v("季度完成进度")]),a("span",[t._v("25%")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",[a("span",[t._v("年度完成进度")]),a("span",[t._v("30%")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",{staticClass:"main-head"},[a("span"),a("span",[t._v("客户数据统计")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",[a("span",{staticClass:"c1"}),a("span",[t._v("已认领客户")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",[a("span",{staticClass:"c2"}),a("span",[t._v("待认领客户")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",[a("span",{staticClass:"c1"}),a("span",[t._v("员工删除")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",[a("span",{staticClass:"c2 unactive"}),a("span",[t._v("客户删除")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"legend"},[a("span",[a("span",{staticClass:"icon-circle c1"}),a("span",{staticClass:"text"},[t._v("新增客户数")])]),a("span",[a("span",{staticClass:"icon-circle c2"}),a("span",{staticClass:"text"},[t._v("流失客户数")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",{staticClass:"main-head"},[a("span"),a("span",[t._v("线索统计")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"bottom"},[a("span",[t._v("线索总计")]),a("span",[t._v("7784")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"legend"},[a("p",[a("span",{staticClass:"c1"}),a("span",[t._v("已转化")])]),a("p",{staticClass:"num"},[t._v("15641")]),a("p",[a("span",{staticClass:"c2 unactive"}),a("span",[t._v("未转化")])]),a("p",{staticClass:"num"},[t._v("1541")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"list"},[a("p",[a("span",[t._v("今日新增线索")]),a("span",[t._v("240")])]),a("p",[a("span",[t._v("昨日新增线索")]),a("span",[t._v("240")])]),a("p",[a("span",[t._v("本月新增线索")]),a("span",[t._v("240")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",{staticClass:"main-head"},[a("span"),a("span",[t._v("最新线索")])])}],n=(a("99af"),a("4160"),a("a15b"),a("d81d"),a("b0c0"),a("d3b7"),a("ac1f"),a("3ca3"),a("1276"),a("159b"),a("ddb0"),a("96cf"),a("1da1")),l=a("ade3"),r=a("365c"),o=a("8e17"),c={data:function(){var t;return t={stat_type:1,date_type:1,daysValue:[],color:["#6881EC","#FFBBC0","#7fd5d8"],name:"新增客户数",tableData:[],loading:!1,ylBarFlag:!0,khBarFlag:!0},Object(l["a"])(t,"loading",!0),Object(l["a"])(t,"total_customer",""),Object(l["a"])(t,"loss_customer",""),Object(l["a"])(t,"follow_total",""),Object(l["a"])(t,"today_count",""),t},watch:{daysValue:function(t){new Date(t[0]).getTime()>new Date(t[1]).getTime()&&(this.daysValue[0]=t[1],this.daysValue[1]=t[1]),this.reqCustomTrend()}},created:function(){this.daysValue=[this.fun_date(-6),(new Date).toLocaleDateString().split("/").join("-")]},mounted:function(){var t=this;window.onresize=function(){var e=t.$echarts.init(document.getElementById("ylBar")),a=t.$echarts.init(document.getElementById("khAdd")),s=t.$echarts.init(document.getElementById("allPie")),i=t.$echarts.init(document.getElementById("losePie"));e.resize(),a.resize(),s.resize(),i.resize()},this.getData(),this.$bus.$on("update",(function(){t.getData()}))},methods:{getData:function(){var t=this,e=[];e[0]=Object(r["H"])({}),e[1]=Object(r["B"])({date_type:this.date_type,start_time:this.daysValue[0],end_time:this.daysValue[1],page:1,limit:1e4}),e[2]=Object(r["A"])({}),Promise.all(e).then((function(e){if(t.loading=!1,200===e[0].code){t.ylBarFlag=!0;var a=[],s=[],i=0;e[0].data.forEach((function(t){a.push(t.name),s.push(t.count)})),s.forEach((function(t){i+=t})),s.forEach((function(t,e){a.map((function(s,n){e===n&&(a[e]="".concat(s,"\n\n").concat(t,"(").concat(Object(o["a"])(t,i),")"))}))})),t.$nextTick((function(){t.getYlBar(a,s)}))}else t.ylBarFlag=!1;if(200===e[1].code){t.khBarFlag=!0;var n=[],l=[],r=[];e[1].data.data.forEach((function(t){n.push(t.add_customer),l.push(t.deleted_customer),r.push(t.created_at)})),t.getKhAddBar(r,n,l)}else t.khBarFlag=!1;200===e[2].code&&(t.loss_customer=e[2].data.loss_customer,t.follow_total=e[2].data.follow_total,t.today_count=e[2].data.today_count,t.total_customer=e[2].data.total_customer,t.getAllPie(t.total_customer.total,[{value:t.total_customer.claimed||0,name:"已认领客户"},{value:t.total_customer.unclaimed||0,name:"待认领客户"}]),t.getLosePie(t.loss_customer.total,[{value:t.loss_customer.deleted_staff||0,name:"员工删除"},{value:t.loss_customer.deleted_customer||0,name:"客户删除"}]))}))},reqCustomTrend:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var a,s,i,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(r["B"])({date_type:t.date_type,start_time:t.daysValue[0],end_time:t.daysValue[1],page:1,limit:1e4});case 2:a=e.sent,200===a.code?(s=[],i=[],n=[],a.data.data.forEach((function(t){s.push(t.add_customer),i.push(t.loss),n.push(t.created_at)})),t.getKhAddBar(n,s,i)):t.khBarFlag=!1;case 4:case"end":return e.stop()}}),e)})))()},fun_date:function(t){var e=new Date,a=(e.getFullYear(),e.getMonth(),e.getDate(),new Date(e));a.setDate(e.getDate()+t);var s=a.getFullYear(),i=a.getMonth()+1<10?"0"+(a.getMonth()+1):a.getMonth()+1,n=a.getDate()<10?"0"+a.getDate():a.getDate(),l=s+"-"+i+"-"+n;return l},customColor:function(t){return t<100?"#6881EC":"#67C23A"},format:function(t){var e=40;return t/100*e+"/"+e},format2:function(t){return t+"%"},getYlBar:function(t,e){var a,s=this.$echarts.init(document.getElementById("ylBar")),i={grid:{left:0,right:20,bottom:0,top:0,containLabel:!0},tooltip:{show:!0,trigger:"axis"},xAxis:[(a={show:!0,type:"category",data:t,axisTick:{alignWithLabel:!0},axisLine:{show:!1}},Object(l["a"])(a,"axisTick",{show:!1}),Object(l["a"])(a,"splitLine",{show:!1}),a)],yAxis:[{show:!1}],series:[{type:"bar",data:e,itemStyle:{barBorderColor:"#6881EC",color:"#6881EC",barBorderRadius:3},showBackground:!0,backgroundStyle:{color:"#E4E9F2",barBorderRadius:3},barWidth:6}]};s.setOption(i)},getAllPie:function(t,e){var a=this.$echarts.init(document.getElementById("allPie")),s={tooltip:{trigger:"item",position:function(t){return[t[0],"10%"]}},color:this.color,series:[{type:"pie",radius:["60%","100%"],avoidLabelOverlap:!1,hoverAnimation:!1,itemStyle:{borderRadius:"100%",borderColor:"#fff",borderWidth:10},label:{show:!0,position:"center",color:"#333",formatter:function(){return"总客户\n\n"+t}},emphasis:{label:{show:!1}},labelLine:{show:!1},data:e}]};a.setOption(s)},getLosePie:function(t,e){var a=this.$echarts.init(document.getElementById("losePie")),s={tooltip:{trigger:"item"},color:this.color,series:[{type:"pie",radius:["60%","100%"],avoidLabelOverlap:!1,hoverAnimation:!1,itemStyle:{borderRadius:"100%",borderColor:"#fff",borderWidth:10},label:{show:!0,position:"center",color:"#333",formatter:function(){return"流失客户\n\n"+t}},emphasis:{label:{show:!1}},labelLine:{show:!1},data:e}]};a.setOption(s)},getKhAddBar:function(t,e,a){var s=this.$echarts.init(document.getElementById("khAdd")),i={color:[this.color[this.stat_type-1]],tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{left:"6%",right:"6%",bottom:0,top:30,containLabel:!0},xAxis:[Object(l["a"])({type:"category",data:t,axisLine:{show:!0,lineStyle:{color:"#999"}},axisTick:{alignWithLabel:!0}},"axisTick",{show:!1})],yAxis:[{type:"value",splitNumber:2,axisLine:{show:!1},axisTick:{show:!1},splitLine:{show:!0,lineStyle:{type:"dashed",color:"#E6E7EB"}}}],series:[Object(l["a"])({name:"新增客户数",type:"line",barWidth:"60%",data:e,itemStyle:{barBorderColor:this.color[0],color:this.color[0],barBorderRadius:[4]}},"barWidth",16),{name:"流失客户数",type:"line",data:a,itemStyle:{barBorderColor:this.color[1],color:this.color[1],barBorderRadius:[4]},barWidth:16}]};s.setOption(i)}}},d=c,u=(a("c5fb"),a("2877")),p=Object(u["a"])(d,s,i,!1,null,"2d4082f0",null);e["default"]=p.exports},a15b:function(t,e,a){"use strict";var s=a("23e7"),i=a("44ad"),n=a("fc6a"),l=a("a640"),r=[].join,o=i!=Object,c=l("join",",");s({target:"Array",proto:!0,forced:o||!c},{join:function(t){return r.call(n(this),void 0===t?",":t)}})},a6917:function(t,e,a){t.exports=a.p+"img/none.3b64bb81.png"},ade3:function(t,e,a){"use strict";function s(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}a.d(e,"a",(function(){return s}))},c5fb:function(t,e,a){"use strict";a("ff0e")},d81d:function(t,e,a){"use strict";var s=a("23e7"),i=a("b727").map,n=a("1dde"),l=a("ae40"),r=n("map"),o=l("map");s({target:"Array",proto:!0,forced:!r||!o},{map:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},ff0e:function(t,e,a){}}]);
//# sourceMappingURL=chunk-2f4f9ea8.9c7987e8.js.map