(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-43356458"],{"6b4d":function(e,t,a){"use strict";a("ae96")},ae96:function(e,t,a){},e638:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content_total"},[a("el-dialog",{staticClass:"addApplet",attrs:{title:"内容统计",visible:e.materialVisible,"close-on-click-modal":!1,"before-close":e.materClose,width:"1300px"},on:{"update:visible":function(t){e.materialVisible=t}}},[a("el-row",{staticClass:"total",attrs:{gutter:24}},[a("el-col",{attrs:{span:8}},[a("el-card",{attrs:{shadow:"never"}},[a("h6",[e._v("昨日搜索次数")]),a("div",{staticClass:"num"},[a("h4",[e._v(e._s(e.num.search_num?e.num.search_num:0))]),0==e.num.search_num_before?a("p",[e._v("与前日持平")]):a("p",[e._v(e._s(e.num.search_num_before))])])])],1),a("el-col",{attrs:{span:8}},[a("el-card",{attrs:{shadow:"never"}},[a("h6",[e._v("昨日发送次数")]),a("div",{staticClass:"num"},[a("h4",[e._v(e._s(e.num.send_num?e.num.send_num:0))]),0==e.num.send_num_before?a("p",[e._v("与前日持平")]):a("p",[e._v(e._s(e.num.send_num_before))])])])],1),a("el-col",{attrs:{span:8}},[a("el-card",{attrs:{shadow:"never"}},[a("h6",[e._v("昨日客户阅读次数")]),a("div",{staticClass:"num"},[a("h4",[e._v(e._s(e.num.open_num?e.num.open_num:0))]),0==e.num.open_num_before?a("p",[e._v("与前日持平")]):a("p",[e._v(e._s(e.num.open_num_before))])])])],1)],1),a("div",{staticClass:"header-tabs"},[a("el-button",{class:"1"==e.checked?"active":"",on:{click:function(t){return e.handleCheckTabs("1")}}},[e._v("内容TOP10")]),a("el-button",{class:"2"==e.checked?"active":"",on:{click:function(t){return e.handleCheckTabs("2")}}},[e._v("员工TOP10")]),a("el-button",{class:"3"==e.checked?"active":"",on:{click:function(t){return e.handleCheckTabs("3")}}},[e._v("搜索词TOP10")]),a("el-button",{class:"4"==e.checked?"active":"",on:{click:function(t){return e.handleCheckTabs("4")}}},[e._v("搜索次数")]),a("el-button",{class:"5"==e.checked?"active":"",on:{click:function(t){return e.handleCheckTabs("5")}}},[e._v("发送次数")]),a("el-button",{class:"6"==e.checked?"active":"",on:{click:function(t){return e.handleCheckTabs("6")}}},[e._v("阅读次数")]),a("span",{staticClass:"line"})],1),a("el-form",{ref:"formInline",staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline}},["1"==e.checked?a("el-form-item",{attrs:{label:"",prop:"search_name"}},[a("el-input",{attrs:{placeholder:"请输入内容",size:"small"},model:{value:e.formInline.search_name,callback:function(t){e.$set(e.formInline,"search_name",t)},expression:"formInline.search_name"}})],1):e._e(),"1"==e.checked||"2"==e.checked||"4"==e.checked||"5"==e.checked||"6"==e.checked?a("el-form-item",{attrs:{label:"",prop:"content_engine_group_id"}},[a("el-select",{attrs:{placeholder:"所有分组",size:"small",clearable:""},model:{value:e.formInline.content_engine_group_id,callback:function(t){e.$set(e.formInline,"content_engine_group_id",t)},expression:"formInline.content_engine_group_id"}},e._l(e.option,(function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})})),1)],1):e._e(),a("el-form-item",{attrs:{label:"",prop:"daysValue"}},[a("el-button",{ref:"day",class:"days"===e.dateType?"btn-blue btn-active":"btn-white",attrs:{size:"small"},on:{click:function(t){e.dateType="days"}}},[e._v("按日")]),a("el-date-picker",{directives:[{name:"show",rawName:"v-show",value:"days"===e.dateType,expression:"dateType === 'days'"}],staticClass:"date-active",staticStyle:{width:"260px"},attrs:{type:"daterange",size:"small","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd"},model:{value:e.daysValue,callback:function(t){e.daysValue=t},expression:"daysValue"}})],1),a("el-form-item",{attrs:{label:"",prop:"weekValueStart"}},[a("el-button",{ref:"week",class:"week"===e.dateType?"btn-blue btn-active":"btn-white",attrs:{size:"small"},on:{click:function(t){e.dateType="week"}}},[e._v("按周")]),a("el-date-picker",{directives:[{name:"show",rawName:"v-show",value:"week"===e.dateType,expression:"dateType === 'week'"}],staticClass:"date-active-center",staticStyle:{width:"160px"},attrs:{type:"week",size:"small",format:"yyyy 第 WW 周","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd",clearable:!1},model:{value:e.weekValueStart,callback:function(t){e.weekValueStart=t},expression:"weekValueStart"}}),a("el-date-picker",{directives:[{name:"show",rawName:"v-show",value:"week"===e.dateType,expression:"dateType === 'week'"}],staticClass:"date-active-left",staticStyle:{width:"160px"},attrs:{type:"week",size:"small",format:"yyyy 第 WW 周","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd",clearable:!1},model:{value:e.weekValueEnd,callback:function(t){e.weekValueEnd=t},expression:"weekValueEnd"}})],1),a("el-form-item",{attrs:{label:"",prop:"monthValue"}},[a("el-button",{ref:"month",staticClass:"btn-white",class:"month"===e.dateType?"btn-blue btn-active":"btn-white",attrs:{size:"small"},on:{click:function(t){e.dateType="month"}}},[e._v("按月")]),a("el-date-picker",{directives:[{name:"show",rawName:"v-show",value:"month"===e.dateType,expression:"dateType === 'month'"}],staticClass:"date-active",staticStyle:{width:"260px"},attrs:{size:"small",format:"yyyy-MM-dd",type:"monthrange","range-separator":"至","start-placeholder":"开始月份","end-placeholder":"结束月份","value-format":"yyyy-MM-dd"},model:{value:e.monthValue,callback:function(t){e.monthValue=t},expression:"monthValue"}})],1),a("el-form-item",{attrs:{label:""}},[a("el-button",{ref:"month",staticClass:"btn-blue",attrs:{size:"small"},on:{click:function(t){return e.search()}}},[e._v(" 查询")])],1)],1),"1"==e.checked||"2"==e.checked?a("div",{staticClass:"sign"},[a("div",{staticClass:"sign_t",on:{click:function(t){return e.changeNum("1")}}},[a("p",{staticClass:"sp1"}),a("h6",[e._v(" 搜索次数 ")])]),a("div",{staticClass:"sign_t",on:{click:function(t){return e.changeNum("2")}}},[a("p",{staticClass:"sp2"}),a("h6",[e._v(" 发送次数 ")])]),a("div",{staticClass:"sign_t",on:{click:function(t){return e.changeNum("3")}}},[a("p",{staticClass:"sp3"}),a("h6",[e._v(" 阅读次数 ")])])]):e._e(),a("div",{staticClass:"echarts",attrs:{id:"bar"}}),a("div",{staticClass:"bot"},[a("h6",{staticClass:"bot_title"},[e._v("详细数据")]),a("el-button",{attrs:{size:"medium"},on:{click:function(t){return e.exportExcel()}}},[e._v("导出数据")])],1),a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{"element-loading-text":"加载中...","element-loading-spinner":"el-icon-loading",data:e.tableData,"header-cell-style":{color:"#333",fontSize:"14px",backgroundColor:"#F6F7FB",fontWeight:"normal"}}},["1"==e.checked?a("el-table-column",{attrs:{prop:"num",label:"次数"}}):e._e(),"1"==e.checked?a("el-table-column",{attrs:{prop:"content_engine_title",label:"内容"}}):e._e(),"1"==e.checked?a("el-table-column",{attrs:{prop:"content_engine_type",label:"类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.Type(t.row.content_engine_type)))]}}],null,!1,1330138331)}):e._e(),"2"==e.checked?a("el-table-column",{attrs:{prop:"phone",label:"成员名称"}}):e._e(),"2"==e.checked?a("el-table-column",{attrs:{prop:"create_count",label:"次数"}}):e._e(),"3"==e.checked?a("el-table-column",{attrs:{prop:"search_name",label:"搜索名称"}}):e._e(),"3"==e.checked?a("el-table-column",{attrs:{prop:"num",label:"次数"}}):e._e(),"4"==e.checked||"5"==e.checked||"6"==e.checked?a("el-table-column",{attrs:{prop:"num",label:"次数"}}):e._e(),"4"==e.checked||"5"==e.checked||"6"==e.checked?a("el-table-column",{attrs:{prop:"created_at",label:"时间"}}):e._e()],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{"current-page":e.page,"page-sizes":[10,20,50,100],"page-size":e.limit,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleLimitChange,"current-change":e.handlePageChange}})],1)],1)],1)},i=[],s=(a("d81d"),a("d3b7"),a("25f0"),a("96cf"),a("1da1")),r=a("365c"),o={props:{materialVisible:{type:Boolean,default:!1}},watch:{materialVisible:function(e){console.log(e),e&&this.getTime()},weekValueStart:function(e){e.toString()>this.weekValueEnd.toString()&&(this.weekValueStart=this.weekValueEnd)},weekValueEnd:function(e){e.toString()<this.weekValueStart.toString()&&(this.weekValueStart=this.weekValueEnd)}},data:function(){return{checked:1,formInline:{content_engine_group_id:"",start_time:this.getCurrentMonthFirst(),end_time:this.getCurrentMonthLast(),search_name:""},tableData:[],value1:"",radio1:"按日",num:{},dateType:"days",daysValue:[this.getCurrentMonthFirst(),this.getCurrentMonthLast()],weekValueStart:this.getCurrentMonthFirst(),weekValueEnd:this.getCurrentMonthLast(),monthValue:[this.getCurrentMonthFirst(),this.getCurrentMonthLast()],option:[],types:1,numType:"",topType:"1",page:1,total:0,limit:10}},methods:{handleLimitChange:function(e){this.limit=e,"4"==this.checked?(this.numType=1,this.getNum()):"5"==this.checked?(this.numType=2,this.getNum()):"6"==this.checked?(this.numType=3,this.getNum()):"1"==this.checked?(this.topType="1",this.getcontentTop()):"2"==this.checked?(this.topType="1",this.getstaffTop()):"3"==this.checked&&this.getsearchTop()},handlePageChange:function(e){this.page=e,"4"==this.checked?(this.numType=1,this.getNum()):"5"==this.checked?(this.numType=2,this.getNum()):"6"==this.checked?(this.numType=3,this.getNum()):"1"==this.checked?(this.topType="1",this.getcontentTop()):"2"==this.checked?(this.topType="1",this.getstaffTop()):"3"==this.checked&&this.getsearchTop()},getCurrentMonthFirst:function(){var e=new Date;e.setDate(1);var t=parseInt(e.getMonth()+1),a=e.getDate();return t<10&&(t="0"+t),a<10&&(a="0"+a),e.getFullYear()+"-"+t+"-"+a},getCurrentMonthLast:function(){var e=new Date,t=e.getMonth(),a=++t,n=new Date(e.getFullYear(),a,1),i=864e5,s=new Date(n-i),r=parseInt(s.getMonth()+1),o=s.getDate();return r<10&&(r="0"+r),o<10&&(o="0"+o),e.getFullYear()+"-"+r+"-"+o},exportExcel:function(){var e=this;0!=this.tableData.length?Promise.all([a.e("chunk-48fcfd91"),a.e("chunk-3720216a")]).then(function(){var t=a("376b"),n=t.export_json_to_excel;if(1==e.checked)var i=["次数","内容","类型"],s=["num","content_engine_title","type"];else if(2==e.checked)i=["手机号","次数"],s=["phone","create_count"];else if(3==e.checked)i=["搜索名称","次数"],s=["search_name","num"];else i=["次数","时间"],s=["num","created_at"];var r=e.tableData,o=e.formatJson(s,r);n(i,o,"列表excel")}.bind(null,a)).catch(a.oe):this.$message.error("暂无数据")},formatJson:function(e,t){return t.map((function(t){return e.map((function(e){return t[e]}))}))},search:function(){"days"==this.dateType?(this.daysValue?(this.formInline.start_time=this.daysValue[0],this.formInline.end_time=this.daysValue[1]):(this.formInline.start_time="",this.formInline.end_time=""),this.types=1):"week"==this.dateType?(this.formInline.start_time=this.weekValueStart,this.formInline.end_time=this.weekValueEnd,this.types=2):this.dateType&&(0!=this.monthValue.length?(this.formInline.start_time=this.monthValue[0],this.formInline.end_time=this.monthValue[1]):(this.formInline.start_time="",this.formInline.end_time=""),this.types=3),"4"==this.checked||"5"==this.checked||"6"==this.checked?this.getNum():"1"==this.checked?this.getcontentTop():"2"==this.checked?this.getstaffTop():"3"==this.checked&&this.getsearchTop()},getcontentTop:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,n,i,s,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(r["m"])({type:e.topType,search_name:e.formInline.search_name,content_engine_group_id:e.formInline.content_engine_group_id,start_time:e.formInline.start_time,end_time:e.formInline.end_time,content_engine_type:"",wx_user_id:"",page:e.page,limit:e.limit});case 2:a=t.sent,"200"==a.code&&(n=[],i=[],e.tableData=a.data.data,e.total=a.data.count,a.data.data.map((function(t){t.type=e.Type(t.content_engine_type),n.push(t.content_engine_title),i.push(t.num)})),s=e.$echarts.init(document.getElementById("bar")),o=1==e.topType?{color:["#6881EC"],tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",data:n,axisTick:{alignWithLabel:!0}}],yAxis:[{type:"value"}],series:[{type:"bar",barWidth:"60%",data:i}]}:2==e.topType?{color:["#7FD5D8"],tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",data:n,axisTick:{alignWithLabel:!0}}],yAxis:[{type:"value"}],series:[{type:"bar",barWidth:"60%",data:i}]}:{color:["#FFBBC0"],tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",data:n,axisTick:{alignWithLabel:!0}}],yAxis:[{type:"value"}],series:[{type:"bar",barWidth:"60%",data:i}]},s.setOption(o));case 4:case"end":return t.stop()}}),t)})))()},getstaffTop:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,n,i,s,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(r["q"])({type:e.topType,content_engine_group_id:e.formInline.content_engine_group_id,start_time:e.formInline.start_time,end_time:e.formInline.end_time,content_engine_type:"",page:e.page,limit:e.limit});case 2:a=t.sent,"200"==a.code&&(n=[],i=[],e.tableData=a.data.data,e.total=a.data.count,a.data.data.map((function(e){n.push(e.phone),i.push(e.create_count)})),s=e.$echarts.init(document.getElementById("bar")),o=1==e.topType?{color:["#6881EC"],tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",data:n,axisTick:{alignWithLabel:!0}}],yAxis:[{type:"value"}],series:[{type:"bar",barWidth:"60%",data:i}]}:2==e.topType?{color:["#7FD5D8"],tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",data:n,axisTick:{alignWithLabel:!0}}],yAxis:[{type:"value"}],series:[{type:"bar",barWidth:"60%",data:i}]}:{color:["#FFBBC0"],tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",data:n,axisTick:{alignWithLabel:!0}}],yAxis:[{type:"value"}],series:[{type:"bar",barWidth:"60%",data:i}]},s.setOption(o));case 4:case"end":return t.stop()}}),t)})))()},getsearchTop:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,n,i,s,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(r["p"])({start_time:e.formInline.start_time,end_time:e.formInline.end_time,page:e.page,limit:e.limit});case 2:a=t.sent,"200"==a.code&&(n=[],i=[],e.tableData=a.data.data,e.total=a.data.count,a.data.data.map((function(e){n.push(e.search_name),i.push(e.num)})),s=e.$echarts.init(document.getElementById("bar")),o={color:["#3398DB"],tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",data:n,axisTick:{alignWithLabel:!0}}],yAxis:[{type:"value"}],series:[{type:"bar",barWidth:"60%",data:i}]},s.setOption(o));case 4:case"end":return t.stop()}}),t)})))()},getTime:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(r["j"])({});case 2:a=t.sent,"200"==a.code&&(console.log(a),e.num=a.data,e.getGroup());case 4:case"end":return t.stop()}}),t)})))()},getGroup:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(r["g"])({});case 2:a=t.sent,200==a.code&&(e.option=a.data.data,e.getcontentTop());case 4:case"end":return t.stop()}}),t)})))()},getNum:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var a,n,i,s,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(r["l"])({type:t.numType,date_type:t.types,wx_user_id:"",search_name:t.formInline.search_name,content_engine_group_id:t.formInline.content_engine_group_id,content_engine_type:"",start_time:t.formInline.start_time,end_time:t.formInline.end_time,page:t.page,limit:t.limit});case 2:a=e.sent,200==a.code&&(t.tableData=a.data.data,t.total=a.data.count,n=[],i=[],a.data.data.map((function(e){n.push(e.created_at),i.push(e.num)})),s=t.$echarts.init(document.getElementById("bar")),o={color:["#3398DB"],tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",data:n,axisTick:{alignWithLabel:!0}}],yAxis:[{type:"value"}],series:[{type:"bar",barWidth:"60%",data:i}]},s.setOption(o));case 4:case"end":return e.stop()}}),e)})))()},changeNum:function(e){1==this.checked?(this.topType=e,this.getcontentTop()):2==this.checked&&(this.topType=e,this.getstaffTop())},handleCheckTabs:function(e){this.checked=e,this.topType,this.page=1,this.$refs["formInline"].resetFields(),"4"==this.checked?(this.numType=1,this.getNum()):"5"==this.checked?(this.numType=2,this.getNum()):"6"==this.checked?(this.numType=3,this.getNum()):"1"==this.checked?(this.topType="1",this.getcontentTop()):"2"==this.checked?(this.topType="1",this.getstaffTop()):"3"==this.checked&&this.getsearchTop()},Type:function(e){if(e){if("1"==e)return"文本";if("2"==e)return"图片";if("3"==e)return"文章";if("4"==e)return"音频";if("5"==e)return"视频";if("6"==e)return"小程序";if("7"==e)return"文件"}},materClose:function(){this.$emit("closepop")}}},c=o,l=(a("6b4d"),a("2877")),h=Object(l["a"])(c,n,i,!1,null,"3c435e41",null);t["default"]=h.exports}}]);
//# sourceMappingURL=chunk-43356458.4f481167.js.map